<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="3. Bash Notes" href="bash.html" /><link rel="prev" title="1. Sphinx tricks" href="sphinx.html" />

    <!-- Generated with Sphinx 7.0.1 and Furo 2023.05.20 -->
        <title>2. Git infos - Gonçalo&#39;s Personal Notes 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=e6660623a769aa55fea372102b9bf3151b292993" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Gonçalo's Personal Notes 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Gonçalo's Personal Notes 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">1. Sphinx tricks</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">2. Git infos</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash.html">3. Bash Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="lyx.html">4. LyX Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="qemu.html">5. Qemu Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="inkscape.html">6. Inkscape Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="zathura.html">7. Zathura Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="zsh.html">8. Zsh Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter.html">9. Jupyter Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pacman.html">10. Pacman Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="grub.html">11. Grub Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vim.html">12. Vim Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">13. Python Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="libreoffice.html">14. Libreoffice Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vscode.html">15. Code Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="nvidia.html">16. Nvidia Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_sound.html">17. Sound on Linux Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_monitoring.html">18. Server Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="pcmanfm.html">19. PCManFM Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="kde_plasma.html">20. KDE Infos - Notes on configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="handlr.html">21. Handlr Notes</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="git-infos">
<span id="id1"></span><h1><span class="section-number">2. </span>Git infos<a class="headerlink" href="#git-infos" title="Permalink to this heading">#</a></h1>
<blockquote class="epigraph">
<div><p>Git is a free and open source distributed version control system designed to handle  everything from small to very large projects with speed and efficiency.</p>
</div></blockquote>
<section id="notes-on-creating-a-git-repository-on-github">
<h2><span class="section-number">2.1. </span>Notes on creating a git repository on github<a class="headerlink" href="#notes-on-creating-a-git-repository-on-github" title="Permalink to this heading">#</a></h2>
<p>On folder do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git init</span>
<span class="go">git commit</span>
<span class="go">git branch -M main</span>
<span class="go">git remote add origin https://github.com/jgroboredo/test.git</span>
<span class="go">git push -u origin main</span>
</pre></div>
</div>
<section id="some-notes-on-the-above-commands">
<h3><span class="section-number">2.1.1. </span>Some notes on the above commands<a class="headerlink" href="#some-notes-on-the-above-commands" title="Permalink to this heading">#</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">-m</span> <span class="pre">master</span> <span class="pre">main</span></code> : renames the master branch in local git repository</p></li>
<li><p>In the second step, we’ll have to create a new branch on the remote named “main” -
because Git does not allow to simply “rename” a remote branch. Instead,
we’ll have to create a new “main” branch and then delete the old “master” branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">u</span> <span class="n">origin</span> <span class="n">main</span>
</pre></div>
</div>
<p>We now have a new branch on the remote named “main”.</p>
</li>
<li><p>When you clone a repository with git clone , it automatically creates a remote connection called origin pointing back to the cloned repository.</p></li>
<li><p>When you do a git push origin master, you are saying to git: “Look git, I want to push the current branch I am on to the remote repository named origin, and I want to push to the master branch in that remote.”. By default, the remote repository is named origin. I only need to specify where I want to push if there are more than 1 repositories.</p></li>
<li><p>When you execute the command: git remote add origin “github repo link” you are saying that for the current project, there is a remote repository with the name origin, with the address of “github repo link”</p></li>
</ul>
</section>
</section>
<section id="check-previous-commit">
<h2><span class="section-number">2.2. </span>Check previous commit<a class="headerlink" href="#check-previous-commit" title="Permalink to this heading">#</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git log</span>
<span class="go">git checkout &lt;commit_hash&gt; (example: 18e0b6a044a715b04bcacd599061b6b8bd586a7a)</span>
<span class="go">git checkout &lt;branch_to_return_to_present_state&gt;</span>
</pre></div>
</div>
</section>
<section id="git-stash-and-log">
<h2><span class="section-number">2.3. </span>Git stash and log<a class="headerlink" href="#git-stash-and-log" title="Permalink to this heading">#</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git log --stat # see which files were altered in each commit</span>
<span class="go">git stash; git stash list; git stash drop</span>
</pre></div>
</div>
</section>
<section id="create-local-git-repository">
<h2><span class="section-number">2.4. </span>Create local git repository<a class="headerlink" href="#create-local-git-repository" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Create a folder which is going to be the “server” -&gt; For example, Notes.git</p></li>
<li><p>Inside the repository do: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span> <span class="pre">--bare</span></code></p></li>
<li><p>On the same computer do: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">/path/to/server</span></code>   -&gt; the repository created this way will be linked to the “server” by an absolute path which only works on this same pc</p></li>
<li><p>On the other computer do: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">goncalo&#64;ip:/path/to/server</span></code></p></li>
</ul>
</section>
<section id="change-the-author-name">
<h2><span class="section-number">2.5. </span>Change the author name<a class="headerlink" href="#change-the-author-name" title="Permalink to this heading">#</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git config --global user.name &quot;John Doe&quot;</span>
</pre></div>
</div>
</section>
<section id="remove-tracked-file-that-is-now-in-gitignore">
<h2><span class="section-number">2.6. </span>Remove tracked file that is now in .gitignore<a class="headerlink" href="#remove-tracked-file-that-is-now-in-gitignore" title="Permalink to this heading">#</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git rm --cached &lt;file&gt;</span>
</pre></div>
</div>
</section>
<section id="check-last-commit-changes">
<h2><span class="section-number">2.7. </span>Check last commit changes<a class="headerlink" href="#check-last-commit-changes" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>show<span class="w"> </span>--name-only<span class="w"> </span><span class="c1"># Lists just the files in the last commit and doesn&#39;t give you the entire guts</span>
git<span class="w"> </span>diff<span class="w"> </span>HEAD^<span class="w"> </span>HEAD<span class="w"> </span><span class="c1"># HEAD^ identifies last commit</span>
</pre></div>
</div>
</section>
<section id="installing-git-in-live-iso-arch">
<h2><span class="section-number">2.8. </span>Installing git in live ISO arch<a class="headerlink" href="#installing-git-in-live-iso-arch" title="Permalink to this heading">#</a></h2>
<p>If error in keys:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pacman<span class="w"> </span>-Sy<span class="w"> </span>archlinux-keyring<span class="p">;</span><span class="w"> </span>pacman-key<span class="w"> </span>--populate<span class="w"> </span>archlinux
</pre></div>
</div>
</section>
<section id="change-remote-url">
<h2><span class="section-number">2.9. </span>Change remote URL<a class="headerlink" href="#change-remote-url" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>-v<span class="w"> </span><span class="c1"># To check the present remote url</span>
git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>origin<span class="w"> </span>&lt;url&gt;
</pre></div>
</div>
</section>
<section id="add-remote-url">
<h2><span class="section-number">2.10. </span>Add remote URL<a class="headerlink" href="#add-remote-url" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>name_of_remote<span class="w"> </span>&lt;url&gt;
git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>name_of_remote<span class="w"> </span>--all
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This changes the default repository! It also pushes all branches!</p>
</div>
<ul>
<li><p>Can use this command to change the default git push:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">edit</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Can use this command to change the default git push.</p>
</div>
<ul>
<li><p>Set preferred remote for current branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">upstream</span><span class="o">-</span><span class="n">to</span> <span class="o">&lt;</span><span class="n">remote</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Set preferred remote for branch_name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="n">branch_name</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">upstream</span><span class="o">-</span><span class="n">to</span> <span class="o">&lt;</span><span class="n">remote</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;/</span><span class="n">branch</span>
</pre></div>
</div>
</li>
<li><p>Shows the default remote for the current branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">vv</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="different-pushes">
<h2><span class="section-number">2.11. </span>Different Pushes<a class="headerlink" href="#different-pushes" title="Permalink to this heading">#</a></h2>
<ul>
<li><p>To push all branches to all remotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">L1</span> <span class="n">git</span> <span class="n">push</span> <span class="o">--</span><span class="nb">all</span>
</pre></div>
</div>
</li>
<li><p>Push a specific branch to all remotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">L1</span> <span class="o">-</span><span class="n">I</span> <span class="n">R</span> <span class="n">git</span> <span class="n">push</span> <span class="n">R</span> <span class="n">branch_name</span>
</pre></div>
</div>
</li>
<li><p>To make a git alias for the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">alias</span><span class="o">.</span><span class="n">pushall</span> <span class="s1">&#39;!git remote | xargs -L1 git push --all&#39;</span>
</pre></div>
</div>
</li>
</ul>
<p>Or</p>
<ul>
<li><p>Create an all remote with several repo URLs to its name:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>all<span class="w"> </span>origin-host:path/proj.git
git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>--add<span class="w"> </span>all<span class="w"> </span>nodester-host:path/proj.git
git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>--add<span class="w"> </span>all<span class="w"> </span>duostack-host:path/proj.git
git<span class="w"> </span>push<span class="w"> </span>all<span class="w"> </span>--all
</pre></div>
</div>
</li>
</ul>
<p>Or</p>
<ul>
<li><p>If you want to always push to repo1, repo2, and repo3 but always pull only from repo1, set up the remote ‘origin’ as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>https://exampleuser@example.com/path/to/repo1
git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>--push<span class="w"> </span>--add<span class="w"> </span>origin<span class="w"> </span>https://exampleuser@example.com/path/to/repo1
git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>--push<span class="w"> </span>--add<span class="w"> </span>origin<span class="w"> </span>https://exampleuser@example.com/path/to/repo2
git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>--push<span class="w"> </span>--add<span class="w"> </span>origin<span class="w"> </span>https://exampleuser@example.com/path/to/repo3
</pre></div>
</div>
</li>
<li><p>If you only want to pull from repo1 but push to repo1 and repo2 for a specific branch specialBranch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>remote<span class="w"> </span><span class="s2">&quot;origin&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ssh://git@aaa.xxx.com:7999/yyy/repo1.git
<span class="w">  </span><span class="nv">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>+refs/heads/*:refs/remotes/origin/*
<span class="w">  </span>...
<span class="o">[</span>remote<span class="w"> </span><span class="s2">&quot;specialRemote&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ssh://git@aaa.xxx.com:7999/yyy/repo1.git
<span class="w">  </span><span class="nv">pushurl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ssh://git@aaa.xxx.com:7999/yyy/repo1.git
<span class="w">  </span><span class="nv">pushurl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ssh://git@aaa.xxx.com:7999/yyy/repo2.git
<span class="w">  </span><span class="nv">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>+refs/heads/*:refs/remotes/origin/*<span class="w"> </span><span class="o">(</span>Note:<span class="w"> </span>Has<span class="w"> </span>origin<span class="w"> </span>here<span class="w"> </span>again,<span class="w"> </span>only<span class="w"> </span>pulls<span class="w"> </span>from<span class="w"> </span>origin<span class="o">)</span>
<span class="w">  </span>...
<span class="o">[</span>branch<span class="w"> </span><span class="s2">&quot;specialBranch&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="nv">remote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>origin
<span class="w">  </span><span class="nv">pushRemote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>specialRemote
<span class="w">  </span>...
</pre></div>
</div>
</li>
<li><p>My experience:</p>
<ul>
<li><p>I can specify which remote to push or pull from:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>pull<span class="w"> </span>remote_name<span class="w"> </span>branch
git<span class="w"> </span>push<span class="w"> </span>remote_name<span class="w"> </span>branch
</pre></div>
</div>
</li>
<li><p>A branch has a default remote: I only need to specify the remote_name and eventually the branch_name (I can’t pull from a non-default remote without specifying the branch) if I don’t want to do it to the default one</p></li>
</ul>
</li>
</ul>
</section>
<section id="use-curl-to-download-from-github">
<h2><span class="section-number">2.12. </span>Use curl to download from github<a class="headerlink" href="#use-curl-to-download-from-github" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-LkSs<span class="w"> </span>https://api.github.com/repos/jgroboredo/arch_install/tarball<span class="w"> </span>-o<span class="w"> </span>master.tar.gz
tar<span class="w"> </span>xf<span class="w"> </span>master.tar.gz
</pre></div>
</div>
</section>
<section id="download-a-file-from-github">
<h2><span class="section-number">2.13. </span>Download a file from github<a class="headerlink" href="#download-a-file-from-github" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Go to file, click on raw, copy link and: <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-L</span> <span class="pre">&quot;link_from_above_step&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">output</span></code></p></li>
</ul>
</section>
<section id="merge-branches">
<h2><span class="section-number">2.14. </span>Merge branches<a class="headerlink" href="#merge-branches" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>master<span class="p">;</span><span class="w"> </span>git<span class="w"> </span>merge<span class="w"> </span>other_branch_name

<span class="c1"># Alternative:</span>
git<span class="w"> </span>merge<span class="w"> </span>--no-ff<span class="w"> </span>other_branch_name<span class="w"> </span><span class="c1"># Using --no-ff allows someone reviewing history to clearly see the branch you checked out to work on.</span>
</pre></div>
</div>
</section>
<section id="delete-branches">
<h2><span class="section-number">2.15. </span>Delete branches<a class="headerlink" href="#delete-branches" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>branch_name<span class="w"> </span><span class="c1"># deletes branch locally</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>--delete<span class="w"> </span>branch_name<span class="w"> </span><span class="c1"># deletes a branch remotely</span>
git<span class="w"> </span>fetch<span class="w"> </span>-p<span class="w"> </span><span class="c1"># Synchronize branch listing. After fetching, branches which no longer exist on the remote will be deleted.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If I do a: <cite>git pull origin master</cite> on another branch, it will merge them.
After creating a new branch, we need to specify tracking information for the current branch. That means we need to do something like <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">&lt;remote&gt;</span> <span class="pre">&lt;branch&gt;</span></code> for it to work.
On the other hand, we can simply set tracking information for the current branch by:
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">--set-upstream-to=origin/&lt;branch&gt;</span> <span class="pre">correction_chapter1</span></code></p>
</div>
</section>
<section id="check-merge-conflicts">
<h2><span class="section-number">2.16. </span>Check merge conflicts<a class="headerlink" href="#check-merge-conflicts" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>show<span class="w"> </span>--name-only<span class="w"> </span>&lt;commit<span class="w"> </span>sha&gt;<span class="w"> </span><span class="c1"># on a commit that was a merge containing conflicts and you&#39;ll see it as part of the message.</span>
</pre></div>
</div>
</section>
<section id="merge-mistake-you-committed-changes-to-local-master">
<h2><span class="section-number">2.17. </span>Merge mistake (You committed changes to (local) master)<a class="headerlink" href="#merge-mistake-you-committed-changes-to-local-master" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>branch<span class="w"> </span>&lt;new-branch&gt;
git<span class="w"> </span>reset<span class="w"> </span>HEAD~<span class="w"> </span>--hard
git<span class="w"> </span>checkout<span class="w"> </span>new-branch
</pre></div>
</div>
<ul class="simple">
<li><p>The first command creates the new branch we want to work with. The second command resets the main branch to just before the last commit,
but leaves the changes you just made in the new branch. Finally, we switch to the new branch where your changes await you.
If you’ve made multiple commits, use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span> <span class="pre">HEAD~&lt;n&gt;</span> <span class="pre">--hard</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;n&gt;</span></code> is the number of commits back you want to go.</p></li>
</ul>
</section>
<section id="git-merge-deleted-by-us">
<h2><span class="section-number">2.18. </span>#Git merge “Deleted by us”<a class="headerlink" href="#git-merge-deleted-by-us" title="Permalink to this heading">#</a></h2>
<p>Resolve all non deleted merge conflicts by hand, which you have to do anyway;
Type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">--name-only</span> <span class="pre">--diff-filter=U</span></code> to get a list of all remaining files in conflit. These files must be the ones you want deleted.</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">--name-only</span> <span class="pre">--diff-filter=U</span> <span class="pre">|</span> <span class="pre">xargs</span> <span class="pre">git</span> <span class="pre">rm</span></code></p>
</section>
<section id="commit-id-and-sha">
<h2><span class="section-number">2.19. </span>Commit ID and SHA<a class="headerlink" href="#commit-id-and-sha" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>show<span class="w"> </span>-s<span class="w"> </span>--format<span class="o">=</span>%H<span class="w"> </span><span class="c1"># shows the last commit full id</span>
git<span class="w"> </span>show<span class="w"> </span>-s<span class="w"> </span>--format<span class="o">=</span>%h<span class="w"> </span><span class="c1"># shows the last commit sha</span>
</pre></div>
</div>
</section>
<section id="git-over-ssh-using-ssh-config">
<h2><span class="section-number">2.20. </span>Git over ssh using ssh config<a class="headerlink" href="#git-over-ssh-using-ssh-config" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>origin<span class="w"> </span>ssh://pi<span class="o">(</span>here<span class="w"> </span>config<span class="w"> </span>name<span class="o">)</span>/home/goncalo/HDD/Documents/git_repos/Notes.git
</pre></div>
</div>
</section>
<section id="sparse-checkout">
<h2><span class="section-number">2.21. </span>Sparse Checkout<a class="headerlink" href="#sparse-checkout" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>&lt;repo&gt;
<span class="nb">cd</span><span class="w"> </span>&lt;repo&gt;
git<span class="w"> </span>init
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>-f<span class="w"> </span>origin<span class="w"> </span>&lt;url&gt;
</pre></div>
</div>
<p>This creates an empty repository with your remote, and fetches all objects but doesn’t check them out.</p>
<p>Then: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">core.sparseCheckout</span> <span class="pre">true</span></code></p>
<p>Now we define which files/folders we want to check out by editing <code class="docutils literal notranslate"><span class="pre">.git/info/sparse-checkout</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;some/dir/&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.git/info/sparse-checkout
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;another/sub/tree&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.git/info/sparse-checkout
</pre></div>
</div>
<p>Finally, just update the repo: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">origin</span> <span class="pre">master</span></code></p>
</section>
<section id="git-submodules">
<h2><span class="section-number">2.22. </span>3.20. Git submodules<a class="headerlink" href="#git-submodules" title="Permalink to this heading">#</a></h2>
<section id="add-submodule">
<h3><span class="section-number">2.22.1. </span>Add submodule<a class="headerlink" href="#add-submodule" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add submodule to repository</span>
<span class="c1"># By default, submodules will add the subproject</span>
<span class="c1"># into a directory named the same as the repository</span>

git<span class="w"> </span>submodule<span class="w"> </span>add<span class="w"> </span>&lt;link_to_submodule&gt;<span class="w"> </span>&lt;optional_path&gt;

<span class="c1"># Although the submodule is a subdirectory in your working directory,</span>
<span class="c1"># Git sees it as a submodule and doesn’t track its</span>
<span class="c1"># contents when you’re not in that directory</span>

git<span class="w"> </span>diff<span class="w"> </span>--cached<span class="w"> </span>--submodule
</pre></div>
</div>
</section>
<section id="clone-repo-with-submodule">
<h3><span class="section-number">2.22.2. </span>Clone repo with submodule<a class="headerlink" href="#clone-repo-with-submodule" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>&lt;main_project_link&gt;
git<span class="w"> </span>submodule<span class="w"> </span>init<span class="w"> </span><span class="c1"># initializes local config file</span>
git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span><span class="c1"># fetch all the data from that project</span>

<span class="c1"># or</span>

git<span class="w"> </span>clone<span class="w"> </span>--recurse-submodules

<span class="c1"># or</span>
git<span class="w"> </span>clone<span class="w"> </span>&lt;main_project_link&gt;
git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init
</pre></div>
</div>
</section>
<section id="pulling-in-upstream-changes-from-the-submodule-remote">
<h3><span class="section-number">2.22.3. </span>Pulling in Upstream Changes from the Submodule Remote<a class="headerlink" href="#pulling-in-upstream-changes-from-the-submodule-remote" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;git_submodule_dir&gt;
git<span class="w"> </span>fecth
git<span class="w"> </span>merge

<span class="c1"># or</span>

git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--remote<span class="w"> </span>&lt;submodule_name&gt;

<span class="nb">cd</span><span class="w"> </span>&lt;main_project&gt;
git<span class="w"> </span>diff<span class="w"> </span>--submodule<span class="w"> </span><span class="c1">#  get a list of commits that were added to the submodule</span>
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>diff.submodule<span class="w"> </span>log<span class="w"> </span><span class="c1"># to avoid the need to write --submodule in every git diff</span>

<span class="c1"># If you commit at this point then you will lock the submodule</span>
<span class="c1"># into having the new code when other people update.</span>

git<span class="w"> </span>config<span class="w"> </span>-f<span class="w"> </span>.gitmodules<span class="w"> </span>submodule.DbConnector.branch<span class="w"> </span>stable<span class="w"> </span><span class="c1"># in order to track other branch</span>

<span class="c1"># if we leave off -f .gitmodules it will only make the change locally</span>

git<span class="w"> </span>config<span class="w"> </span>status.submodulesummary<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1"># to see a summary of changes to the submodules</span>
</pre></div>
</div>
</section>
<section id="pulling-upstream-changes-from-the-project-remote">
<h3><span class="section-number">2.22.4. </span>Pulling Upstream Changes from the Project Remote<a class="headerlink" href="#pulling-upstream-changes-from-the-project-remote" title="Permalink to this heading">#</a></h3>
<p>Now the perspective of the colaborator that cloned the Main Project.</p>
<p>Simply executing <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> is not enough.
By default, the git pull command recursively fetches submodules changes. However, it does not update the submodules.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init<span class="w"> </span>--recursive

<span class="c1"># --init flag: MainProject might have added new submodules</span>
<span class="c1"># --recursive flag: if submodules have nested submodules</span>

<span class="c1"># or</span>

git<span class="w"> </span>pull<span class="w"> </span>--recurse-submodules
</pre></div>
</div>
</section>
<section id="upstream-repository-changed-url-of-the-submodule">
<h3><span class="section-number">2.22.5. </span>Upstream repository changed url of the submodule<a class="headerlink" href="#upstream-repository-changed-url-of-the-submodule" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># copy the new URL to your local config</span>
$<span class="w"> </span>git<span class="w"> </span>submodule<span class="w"> </span>sync<span class="w"> </span>--recursive
<span class="c1"># update the submodule from the new URL</span>
$<span class="w"> </span>git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init<span class="w"> </span>--recursive
</pre></div>
</div>
</section>
<section id="switching-from-subdirectories-to-submodules">
<h3><span class="section-number">2.22.6. </span>Switching from subdirectories to submodules<a class="headerlink" href="#switching-from-subdirectories-to-submodules" title="Permalink to this heading">#</a></h3>
<p>Problem:  we have been tracking files in our project and want to move them out into a submodule.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#First unstage</span>
git<span class="w"> </span>rm<span class="w"> </span>-r<span class="w"> </span>SubDir
<span class="c1"># Then Add</span>
git<span class="w"> </span>submodule<span class="w"> </span>add<span class="w"> </span>&lt;submodule_link&gt;
</pre></div>
</div>
</section>
<section id="removing-a-submodule">
<h3><span class="section-number">2.22.7. </span>Removing a submodule<a class="headerlink" href="#removing-a-submodule" title="Permalink to this heading">#</a></h3>
<p>In order to delete a submodule:</p>
<ul class="simple">
<li><p>Delete the relevant line from the <code class="docutils literal notranslate"><span class="pre">.gitmodules</span></code> file</p></li>
<li><p>Delete the relevant section from <code class="docutils literal notranslate"><span class="pre">.git/config</span></code></p></li>
<li><p>git rm –cached path_to_submodule</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the last step, if the submodule is under sparse-checkout, add the flag <code class="docutils literal notranslate"><span class="pre">--sparse</span></code> to also affect it.</p>
</div>
</section>
</section>
<section id="migrate-part-of-git-repository">
<h2><span class="section-number">2.23. </span>Migrate part of git repository<a class="headerlink" href="#migrate-part-of-git-repository" title="Permalink to this heading">#</a></h2>
<p>After a fresh clone of the repository to migrate, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git-filter-repo<span class="w"> </span>--prune-degenerate<span class="w"> </span>always<span class="w"> </span>--prune-empty<span class="w"> </span>always<span class="w"> </span>--path<span class="w"> </span>/path/to/keep/1<span class="w"> </span>--path<span class="w"> </span>/path/to/keep/2

<span class="c1"># Eventually rename things</span>
<span class="c1"># Put everything in root</span>
git-filter-repo<span class="w"> </span>--path-rename<span class="w"> </span>/previous/path/:

<span class="c1"># Change name</span>
git-filter-repo<span class="w"> </span>--path-rename<span class="w"> </span>/previous/path/:/new/path

<span class="c1"># migrate to new repo</span>
<span class="nb">cd</span><span class="w"> </span>new_repo
git<span class="w"> </span>init
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>old-repo<span class="w"> </span>../myrepo
git<span class="w"> </span>pull<span class="w"> </span>old-repo<span class="w"> </span>master<span class="w"> </span>--allow-unrelated-histories
git<span class="w"> </span>remote<span class="w"> </span>remove<span class="w"> </span>old-repo
git<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>&lt;new/origin&gt;
</pre></div>
</div>
</section>
<section id="git-reverse-patch">
<h2><span class="section-number">2.24. </span>Git reverse patch<a class="headerlink" href="#git-reverse-patch" title="Permalink to this heading">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>fsck<span class="w"> </span>--no-reflog<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;/dangling commit/ {print $3}&#39;</span>

<span class="c1"># create patch</span>

git<span class="w"> </span>diff<span class="w"> </span>&gt;<span class="w"> </span>my_patch.patch
git<span class="w"> </span>apply<span class="w"> </span>--reject<span class="w"> </span>--whitespace<span class="o">=</span>fix<span class="w"> </span>--reverse<span class="w"> </span>my_patch.patch
</pre></div>
</div>
</section>
<section id="git-tag-checkout-submodules">
<h2><span class="section-number">2.25. </span>Git tag checkout submodules<a class="headerlink" href="#git-tag-checkout-submodules" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">--recurse-submodules</span> <span class="pre">tags/&lt;tag_name&gt;</span></code>, where the <code class="docutils literal notranslate"><span class="pre">tag_name</span></code> can be
obtained through <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">-l</span></code>, assumes that every submodule recorded in that tag are
already initialized. Since that’s not the case here, it errors out because it can’t
find the .git directory of the submodule. The message could be clearer.
What you have to do (the first time you switch to branch-c after cloning your repository)
is to check out branch-c non-recursively, and then initialize the submodule:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>branch-c
git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init<span class="w"> </span>--recursive
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Submodules working trees are not checked out by default by git checkout &lt;branch&gt;.</p>
</div>
</section>
<section id="git-pushd-popd">
<h2><span class="section-number">2.26. </span>Git pushd/popd<a class="headerlink" href="#git-pushd-popd" title="Permalink to this heading">#</a></h2>
<p>In order to mimic the <code class="docutils literal notranslate"><span class="pre">pushd</span></code> and <code class="docutils literal notranslate"><span class="pre">popd</span></code> shell commands but for git checkout,
add the following scripts to path:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">git-pushd</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">SUBDIRECTORY_OK</span><span class="o">=</span><span class="m">1</span>
.<span class="w"> </span><span class="k">$(</span>git<span class="w"> </span>--exec-path<span class="k">)</span>/git-sh-setup

<span class="o">{</span><span class="w"> </span>git<span class="w"> </span>symbolic-ref<span class="w"> </span>HEAD<span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>s_refs/heads/__<span class="p">;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="nv">$GIT_DIR</span>/.pushd<span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>cat<span class="w"> </span><span class="nv">$GIT_DIR</span>/.pushd<span class="p">;</span><span class="w"> </span><span class="o">}</span><span class="w"> </span>&gt;<span class="nv">$GIT_DIR</span>/.pushd.new
mv<span class="w"> </span><span class="nv">$GIT_DIR</span>/.pushd.new<span class="w"> </span><span class="nv">$GIT_DIR</span>/.pushd
git<span class="w"> </span>checkout<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">git-popd</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">SUBDIRECTORY_OK</span><span class="o">=</span><span class="m">1</span>
.<span class="w"> </span><span class="k">$(</span>git<span class="w"> </span>--exec-path<span class="k">)</span>/git-sh-setup

<span class="nv">REF</span><span class="o">=</span><span class="k">$(</span>head<span class="w"> </span>-n1<span class="w"> </span><span class="nv">$GIT_DIR</span>/.pushd<span class="k">)</span>

<span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$REF</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>die<span class="w"> </span><span class="s2">&quot;No refs to pop&quot;</span>
git<span class="w"> </span>checkout<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$REF</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;1d&#39;</span><span class="w"> </span><span class="nv">$GIT_DIR</span>/.pushd
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When adding a script to <code class="docutils literal notranslate"><span class="pre">PATH</span></code> with a name <code class="docutils literal notranslate"><span class="pre">git-smth</span></code>, then the command
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">smth</span></code> becomes available.</p>
</div>
<p>Finally, for the auto-completions, do:</p>
<ul>
<li><p>For <code class="docutils literal notranslate"><span class="pre">bash</span></code>, create a file <code class="docutils literal notranslate"><span class="pre">/etc/bash_completion.d/git-pushd</span></code> with the following content:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/usr/share/bash-completion/completions/git

_git_pushd<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>_git_checkout<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
</li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">zsh</span></code>, add to the file <code class="docutils literal notranslate"><span class="pre">/usr/share/zsh/functions/Completion/Unix/_git</span></code>,
below the <code class="docutils literal notranslate"><span class="pre">_git-checkout</span></code> function:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>_git-pushd<span class="w"> </span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>_git-checkout
<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="git-ssh">
<h2><span class="section-number">2.27. </span>Git ssh<a class="headerlink" href="#git-ssh" title="Permalink to this heading">#</a></h2>
<p>An useful git config for ssh usage might come from the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>Core.sshCommand<span class="w"> </span><span class="s1">&#39;ssh -i /home/jenkins/.ssh/id_rsa -o IdentitiesOnly=yes -o PasswordAuthentication=no&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I had a problem when executing this as another user. What solved it was adding a correct <code class="docutils literal notranslate"><span class="pre">known_hosts</span></code> file to the
corresponding user <code class="docutils literal notranslate"><span class="pre">.ssh</span></code> folder.</p>
</div>
</section>
<section id="git-lfs">
<h2><span class="section-number">2.28. </span>Git lfs<a class="headerlink" href="#git-lfs" title="Permalink to this heading">#</a></h2>
<p>The promise of git lfs is not that your repo will be smaller but that when you clone, you won’t have to
download all the git objects so the clone will be smaller and faster.
Because for the file managed by git-lfs, only the files that should appear
in your working directory will be downloaded during the git checkout.</p>
<p>In order to track files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>lfs<span class="w"> </span>track<span class="w"> </span><span class="s2">&quot;*.psd&quot;</span>
</pre></div>
</div>
<p>and in order to move files to lfs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>lfs<span class="w"> </span>migrate<span class="w"> </span>import<span class="w"> </span>--include<span class="o">=</span><span class="s2">&quot;dir/**&quot;</span><span class="w"> </span>--include-ref<span class="o">=</span>refs/heads/master
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will rewrite the history of a repo so that specified large files are kept in LFS.</p>
</div>
<p>If I get the message <code class="docutils literal notranslate"><span class="pre">Encountered</span> <span class="pre">1</span> <span class="pre">file</span> <span class="pre">that</span> <span class="pre">should</span> <span class="pre">have</span> <span class="pre">been</span> <span class="pre">a</span> <span class="pre">pointer,</span> <span class="pre">but</span> <span class="pre">wasn't</span></code>, I can run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>lfs<span class="w"> </span>fsck<span class="w"> </span>--pointers
</pre></div>
</div>
<p>There are also the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>lfs<span class="w"> </span>migrate<span class="w"> </span>import<span class="w"> </span>--everything<span class="w"> </span>--include<span class="o">=</span><span class="s1">&#39;*.png&#39;</span><span class="w"> </span>--exclude<span class="o">=</span><span class="s1">&#39;myfile.png&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">--everything</span></code> means that it will change all commits.
The <code class="docutils literal notranslate"><span class="pre">--everything</span></code> option will run the migration in all local and remote Git refs (branches, tags).
Additionally, this will also create a .gitattributes file that will tell Git to store
all files specified in Git LFS.</p>
</div>
</section>
<section id="git-absorb">
<h2><span class="section-number">2.29. </span>Git absorb<a class="headerlink" href="#git-absorb" title="Permalink to this heading">#</a></h2>
<p>Check <a class="reference external" href="https://github.com/tummychow/git-absorb">github.com</a>.</p>
<p>You have a feature branch with a few commits. Your teammate reviewed the branch and pointed out a few bugs.
You have fixes for the bugs, but you don’t want to shove them all into an opaque commit that says fixes,
because you believe in atomic commits. Instead of manually finding commit SHAs for git commit –fixup,
or running a manual interactive rebase, do this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span><span class="nv">$FILES_YOU_FIXED</span>
git<span class="w"> </span>absorb<span class="w"> </span>--and-rebase
</pre></div>
</div>
</section>
<section id="git-fixup">
<h2><span class="section-number">2.30. </span>Git fixup<a class="headerlink" href="#git-fixup" title="Permalink to this heading">#</a></h2>
<p>Fixup commits are created using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--fixup</span> <span class="pre">&lt;SHA&gt;</span></code>. Practically, <code class="docutils literal notranslate"><span class="pre">--fixup</span></code> associates a new
commit with an existing commit so that when you do an interactive rebase, you don’t have to re-order any
commits in order to squash them. And you don’t have to change any commit messages.</p>
<p>It is usually used with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">-i</span> <span class="pre">--autosquash</span></code>. The rebase will automatically take care of
squashing those commits created with –fixup in the correct order!</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="bash.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">3. </span>Bash Notes</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sphinx.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">1. </span>Sphinx tricks</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Gonçalo Roboredo
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">2. Git infos</a><ul>
<li><a class="reference internal" href="#notes-on-creating-a-git-repository-on-github">2.1. Notes on creating a git repository on github</a><ul>
<li><a class="reference internal" href="#some-notes-on-the-above-commands">2.1.1. Some notes on the above commands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-previous-commit">2.2. Check previous commit</a></li>
<li><a class="reference internal" href="#git-stash-and-log">2.3. Git stash and log</a></li>
<li><a class="reference internal" href="#create-local-git-repository">2.4. Create local git repository</a></li>
<li><a class="reference internal" href="#change-the-author-name">2.5. Change the author name</a></li>
<li><a class="reference internal" href="#remove-tracked-file-that-is-now-in-gitignore">2.6. Remove tracked file that is now in .gitignore</a></li>
<li><a class="reference internal" href="#check-last-commit-changes">2.7. Check last commit changes</a></li>
<li><a class="reference internal" href="#installing-git-in-live-iso-arch">2.8. Installing git in live ISO arch</a></li>
<li><a class="reference internal" href="#change-remote-url">2.9. Change remote URL</a></li>
<li><a class="reference internal" href="#add-remote-url">2.10. Add remote URL</a></li>
<li><a class="reference internal" href="#different-pushes">2.11. Different Pushes</a></li>
<li><a class="reference internal" href="#use-curl-to-download-from-github">2.12. Use curl to download from github</a></li>
<li><a class="reference internal" href="#download-a-file-from-github">2.13. Download a file from github</a></li>
<li><a class="reference internal" href="#merge-branches">2.14. Merge branches</a></li>
<li><a class="reference internal" href="#delete-branches">2.15. Delete branches</a></li>
<li><a class="reference internal" href="#check-merge-conflicts">2.16. Check merge conflicts</a></li>
<li><a class="reference internal" href="#merge-mistake-you-committed-changes-to-local-master">2.17. Merge mistake (You committed changes to (local) master)</a></li>
<li><a class="reference internal" href="#git-merge-deleted-by-us">2.18. #Git merge “Deleted by us”</a></li>
<li><a class="reference internal" href="#commit-id-and-sha">2.19. Commit ID and SHA</a></li>
<li><a class="reference internal" href="#git-over-ssh-using-ssh-config">2.20. Git over ssh using ssh config</a></li>
<li><a class="reference internal" href="#sparse-checkout">2.21. Sparse Checkout</a></li>
<li><a class="reference internal" href="#git-submodules">2.22. 3.20. Git submodules</a><ul>
<li><a class="reference internal" href="#add-submodule">2.22.1. Add submodule</a></li>
<li><a class="reference internal" href="#clone-repo-with-submodule">2.22.2. Clone repo with submodule</a></li>
<li><a class="reference internal" href="#pulling-in-upstream-changes-from-the-submodule-remote">2.22.3. Pulling in Upstream Changes from the Submodule Remote</a></li>
<li><a class="reference internal" href="#pulling-upstream-changes-from-the-project-remote">2.22.4. Pulling Upstream Changes from the Project Remote</a></li>
<li><a class="reference internal" href="#upstream-repository-changed-url-of-the-submodule">2.22.5. Upstream repository changed url of the submodule</a></li>
<li><a class="reference internal" href="#switching-from-subdirectories-to-submodules">2.22.6. Switching from subdirectories to submodules</a></li>
<li><a class="reference internal" href="#removing-a-submodule">2.22.7. Removing a submodule</a></li>
</ul>
</li>
<li><a class="reference internal" href="#migrate-part-of-git-repository">2.23. Migrate part of git repository</a></li>
<li><a class="reference internal" href="#git-reverse-patch">2.24. Git reverse patch</a></li>
<li><a class="reference internal" href="#git-tag-checkout-submodules">2.25. Git tag checkout submodules</a></li>
<li><a class="reference internal" href="#git-pushd-popd">2.26. Git pushd/popd</a></li>
<li><a class="reference internal" href="#git-ssh">2.27. Git ssh</a></li>
<li><a class="reference internal" href="#git-lfs">2.28. Git lfs</a></li>
<li><a class="reference internal" href="#git-absorb">2.29. Git absorb</a></li>
<li><a class="reference internal" href="#git-fixup">2.30. Git fixup</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    </body>
</html>