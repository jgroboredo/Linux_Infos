<!DOCTYPE html>
<html>
<head>
<title>general_linux_infos.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="1-table-of-contents">1. Table of contents</h1>
<ul>
<li><a href="#1-table-of-contents">1. Table of contents</a>
<ul>
<li><a href="#11-introduction">1.1. Introduction</a></li>
</ul>
</li>
<li><a href="#2-markdown-notes">2. Markdown Notes</a>
<ul>
<li><a href="#21-vscode-extensions">2.1. VsCode extensions</a></li>
</ul>
</li>
<li><a href="#3-git-notes">3. Git notes</a>
<ul>
<li><a href="#31-notes-on-creating-a-git-repository-on-github">3.1. Notes on creating a git repository on github</a>
<ul>
<li><a href="#311-some-notes-on-the-above-commands">3.1.1. Some notes on the above commands</a></li>
</ul>
</li>
<li><a href="#32-check-previous-commit">3.2. Check previous commit</a></li>
<li><a href="#33-git-stash-and-log">3.3. Git stash and log</a></li>
<li><a href="#34-create-local-git-repository">3.4. Create local git repository</a></li>
<li><a href="#35-change-the-author-name">3.5. Change the author name</a></li>
<li><a href="#36-remove-tracked-file-that-is-now-in-gitignore">3.6. Remove tracked file that is now in .gitignore</a></li>
<li><a href="#37-check-last-commit-changes">3.7. Check last commit changes</a></li>
<li><a href="#38-installing-git-in-live-iso-arch">3.8. Installing git in live ISO arch</a></li>
<li><a href="#39-change-remote-url">3.9. Change remote URL</a></li>
<li><a href="#310-add-remote-url">3.10. Add remote URL</a></li>
<li><a href="#311-different-pushes">3.11. Different Pushes</a></li>
<li><a href="#312-download-a-file-from-github">3.12. Download a file from github</a></li>
<li><a href="#313-merge-branches">3.13. Merge branches</a></li>
<li><a href="#314-check-merge-conflicts">3.14. Check merge conflicts</a></li>
<li><a href="#315-merge-mistake-you-committed-changes-to-local-master">3.15. Merge mistake (You committed changes to (local) master)</a></li>
<li><a href="#316-git-merge-deleted-by-us">3.16. Git merge &quot;Deleted by us&quot;</a></li>
<li><a href="#317-commit-id-and-sha">3.17. Commit ID and SHA</a></li>
<li><a href="#318-git-over-ssh-using-ssh-config">3.18. Git over ssh using ssh config</a></li>
<li><a href="#319-sparse-checkout">3.19. Sparse Checkout</a></li>
<li><a href="#320-git-submodules">3.20. Git submodules</a>
<ul>
<li><a href="#3201-add-submodule">3.20.1. Add submodule</a></li>
<li><a href="#3202-clone-repo-with-submodule">3.20.2. Clone repo with submodule</a></li>
<li><a href="#3203-pulling-in-upstream-changes-from-the-submodule-remote">3.20.3. Pulling in Upstream Changes from the Submodule Remote</a></li>
<li><a href="#3204-pulling-upstream-changes-from-the-project-remote">3.20.4. Pulling Upstream Changes from the Project Remote</a></li>
<li><a href="#3205-upstream-repository-changed-url-of-the-submodule">3.20.5. Upstream repository changed url of the submodule</a></li>
<li><a href="#3206-switching-from-subdirectories-to-submodules">3.20.6. Switching from subdirectories to submodules</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-bash-notes">4. Bash Notes</a>
<ul>
<li><a href="#41-bash-note-1">4.1. Bash Note 1</a></li>
<li><a href="#42-bash-note-2">4.2. Bash Note 2</a></li>
<li><a href="#43-bash-note-3">4.3. Bash Note 3</a></li>
<li><a href="#44-bash-note-4---compare-files">4.4. Bash Note 4 - Compare Files</a></li>
<li><a href="#45-bash-note-5---use-of-curly-braces">4.5. Bash Note 5 - Use of curly braces</a></li>
<li><a href="#46-bash-note-6---search-recursively-in-directory">4.6. Bash Note 6 - Search recursively in directory</a></li>
</ul>
</li>
<li><a href="#5-lyx">5. Lyx</a>
<ul>
<li><a href="#51-configure-lyx">5.1. Configure lyx</a></li>
<li><a href="#52-kpathsea">5.2. Kpathsea</a></li>
<li><a href="#53-configure-minted">5.3. Configure minted</a></li>
<li><a href="#54-install-custom-cls">5.4. Install custom cls</a></li>
</ul>
</li>
<li><a href="#6-qemu">6. Qemu</a>
<ul>
<li><a href="#61-commands">6.1. Commands</a></li>
<li><a href="#62-variables">6.2. Variables</a></li>
</ul>
</li>
<li><a href="#7-inkscape">7. Inkscape</a></li>
<li><a href="#8-vscode">8. VsCode</a></li>
<li><a href="#9-zathura">9. Zathura</a></li>
<li><a href="#10-zsh">10. Zsh</a></li>
<li><a href="#11-jupyter">11. Jupyter</a>
<ul>
<li><a href="#111-jupyter-lab">11.1. Jupyter-Lab</a></li>
<li><a href="#112-opening-browser">11.2. Opening browser</a></li>
</ul>
</li>
<li><a href="#12-tmux">12. Tmux</a></li>
<li><a href="#13-pacman">13. Pacman</a>
<ul>
<li><a href="#131-pacman-cache">13.1. Pacman cache</a></li>
<li><a href="#132-install-from-live-usb">13.2. Install from live usb</a></li>
<li><a href="#133-pacman-infos">13.3. Pacman infos</a></li>
<li><a href="#134-pacman-mirrors">13.4. pacman mirrors</a></li>
</ul>
</li>
<li><a href="#14-grub">14. Grub</a>
<ul>
<li><a href="#141-install-grub-manually-when-manjaro-fails">14.1. Install grub manually when manjaro fails</a></li>
</ul>
</li>
<li><a href="#15-vim">15. Vim</a>
<ul>
<li><a href="#151-install-vim-in-cluster">15.1. Install Vim in cluster</a></li>
<li><a href="#152-vim-snippets">15.2. Vim snippets</a></li>
<li><a href="#153-manage-tabs">15.3. Manage Tabs</a></li>
<li><a href="#154-vim-surroundings">15.4. Vim surroundings</a></li>
<li><a href="#155-some-commands">15.5. Some commands</a></li>
</ul>
</li>
<li><a href="#16-lighdm">16. Lighdm</a></li>
<li><a href="#17-i3blocks">17. i3Blocks</a></li>
<li><a href="#18-pcmanfm">18. PcmanFM</a>
<ul>
<li><a href="#181-basic-configuration">18.1. Basic Configuration</a></li>
</ul>
</li>
<li><a href="#19-mpv">19. MPV</a>
<ul>
<li><a href="#191-annoying-bar-at-the-top">19.1. Annoying bar at the top</a></li>
<li><a href="#192-watch-stream">19.2. Watch stream</a></li>
</ul>
</li>
<li><a href="#20-mime-types">20. Mime-Types</a>
<ul>
<li><a href="#201-alternative-to-xdg">20.1. Alternative to xdg:</a></li>
</ul>
</li>
<li><a href="#21-color-scheme">21. Color-Scheme</a></li>
<li><a href="#22-libreoffice">22. LibreOffice</a></li>
<li><a href="#23-reflector">23. Reflector</a></li>
<li><a href="#24-acestream">24. AceStream</a></li>
<li><a href="#25-swig">25. Swig</a></li>
<li><a href="#26-tty-login">26. TTY Login</a>
<ul>
<li><a href="#261-add-username">26.1. Add Username</a></li>
<li><a href="#262-change-startup-message">26.2. Change startup message</a></li>
</ul>
</li>
<li><a href="#27-hpc">27. HPC</a>
<ul>
<li><a href="#271-modules">27.1. Modules</a></li>
<li><a href="#272-some-commands">27.2. Some Commands</a></li>
</ul>
</li>
<li><a href="#28-network">28. Network</a>
<ul>
<li><a href="#281-network-not-connecting-at-startup">28.1. Network not connecting at startup</a></li>
<li><a href="#282-mac-address">28.2. MAC address</a></li>
</ul>
</li>
<li><a href="#29-dmenu_ext">29. Dmenu_ext</a>
<ul>
<li><a href="#291-not-opening-paths">29.1. Not opening paths</a></li>
</ul>
</li>
<li><a href="#30-nvidia">30. Nvidia</a>
<ul>
<li><a href="#301-nvidia-back-screen-on-tty">30.1. NVIDIA back screen on TTY</a></li>
</ul>
</li>
<li><a href="#31-cfp-nvidia">31. CFP Nvidia</a>
<ul>
<li><a href="#311-vpn-access">31.1. VPN access</a></li>
<li><a href="#312-first-steps-to-config-account">31.2. First steps to config account</a></li>
</ul>
</li>
<li><a href="#32-awk">32. Awk</a></li>
<li><a href="#33-sublime-text">33. Sublime-Text</a></li>
<li><a href="#34-config-printer">34. Config-Printer</a>
<ul>
<li><a href="#341-cups">34.1. CUPS</a></li>
<li><a href="#342-avahi">34.2. AVAHI</a></li>
<li><a href="#343-hp-scanner">34.3. HP SCANNER</a></li>
</ul>
</li>
<li><a href="#35-sway">35. Sway</a>
<ul>
<li><a href="#351-packages-to-check-for-base-arch-install">35.1. Packages to check for base arch install</a></li>
<li><a href="#352-services">35.2. Services</a></li>
<li><a href="#353-sway-install-from-yt">35.3. Sway install from YT:</a></li>
<li><a href="#354-sway-my-experience">35.4. Sway my experience</a>
<ul>
<li><a href="#3541-packages">35.4.1. Packages</a></li>
<li><a href="#3542-configuration">35.4.2. Configuration</a></li>
<li><a href="#3543-fix-cannot-open-display">35.4.3. Fix cannot open display</a></li>
<li><a href="#3544-mathematica">35.4.4. Mathematica</a></li>
<li><a href="#3545-zoom">35.4.5. Zoom</a></li>
<li><a href="#3546-albert">35.4.6. Albert</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#36-rclone">36. Rclone</a>
<ul>
<li><a href="#361-config">36.1. Config</a></li>
<li><a href="#362-rclone-union">36.2. Rclone union</a></li>
<li><a href="#363-problem">36.3. Problem</a></li>
<li><a href="#364-sync">36.4. Sync</a></li>
<li><a href="#365-onedrive">36.5. OneDrive</a></li>
</ul>
</li>
<li><a href="#37-pipewire">37. Pipewire</a></li>
<li><a href="#38-fail2ban">38. Fail2Ban</a>
<ul>
<li><a href="#381-configuration">38.1. Configuration</a></li>
</ul>
</li>
<li><a href="#39-systemd-resolved">39. Systemd-Resolved</a>
<ul>
<li><a href="#391-activate-service">39.1. Activate Service:</a></li>
</ul>
</li>
<li><a href="#40-dual-boot">40. Dual Boot</a>
<ul>
<li><a href="#401-windows-after-linux">40.1. Windows After Linux</a></li>
<li><a href="#402-fix-windows-bootloader-gone">40.2. Fix Windows bootloader Gone</a></li>
</ul>
</li>
<li><a href="#41-rp-monitor">41. RP Monitor</a>
<ul>
<li><a href="#411-create-db-in-influxdb">41.1. Create db in influxdb</a></li>
<li><a href="#412-config-grafana">41.2. CONFIG GRAFANA</a></li>
<li><a href="#413-notes">41.3. Notes</a></li>
</ul>
</li>
<li><a href="#42-docker">42. Docker</a>
<ul>
<li><a href="#421-jacket">42.1. Jacket</a></li>
<li><a href="#422-sonarr">42.2. Sonarr</a></li>
<li><a href="#423-system-service-to-run-docker">42.3. System service to run docker</a></li>
<li><a href="#424-rclone-dlna">42.4. Rclone DLNA</a></li>
<li><a href="#425-transdrone">42.5. Transdrone</a></li>
<li><a href="#426-jellyfin">42.6. JellyFin</a></li>
<li><a href="#427-qbittorrent">42.7. QBitTorrent</a></li>
<li><a href="#428-bazarr">42.8. Bazarr</a></li>
<li><a href="#429-organizrr">42.9. Organizrr</a></li>
<li><a href="#4210-nginx">42.10. NginX</a></li>
<li><a href="#4211-some-important-concepts">42.11. Some Important Concepts</a></li>
<li><a href="#4212-update-containers">42.12. Update Containers</a></li>
<li><a href="#4213-some-notes-based-on-experience">42.13. Some notes based on experience</a></li>
</ul>
</li>
<li><a href="#43-vpn">43. VPN</a>
<ul>
<li><a href="#431-configuration">43.1. Configuration</a></li>
<li><a href="#432-notes">43.2. Notes</a></li>
<li><a href="#433-viseu">43.3. Viseu</a></li>
<li><a href="#434-check-ports">43.4. Check Ports</a></li>
<li><a href="#435-fix-connection-problem">43.5. Fix connection problem</a></li>
<li><a href="#436-connect-to-rebelo">43.6. Connect to Rebelo</a></li>
<li><a href="#437-udp2raw">43.7. UDP2RAW</a></li>
<li><a href="#438-updated-vpn">43.8. Updated VPN</a></li>
<li><a href="#439-fixing-routes">43.9. Fixing routes</a></li>
</ul>
</li>
<li><a href="#44-ddns">44. DDNS</a></li>
<li><a href="#45-encrypt-dir">45. Encrypt dir</a>
<ul>
<li><a href="#451-disable-password-cache">45.1. Disable password cache</a></li>
</ul>
</li>
<li><a href="#46-violent-monkey">46. Violent Monkey</a></li>
<li><a href="#47-wireshark">47. Wireshark</a></li>
<li><a href="#48-telegram">48. Telegram</a>
<ul>
<li><a href="#481-botfather">48.1. BotFather</a></li>
<li><a href="#482-find-bot-chat-id">48.2. Find bot chat ID</a></li>
<li><a href="#483-add-sonarr-and-radarr-to-telegram">48.3. Add sonarr and radarr to telegram</a></li>
</ul>
</li>
<li><a href="#49-barrier">49. Barrier</a></li>
<li><a href="#50-teamviewer">50. TeamViewer</a></li>
<li><a href="#51-flatpak">51. Flatpak</a>
<ul>
<li><a href="#511-firefox">51.1. Firefox</a></li>
</ul>
</li>
<li><a href="#52-vm">52. VM</a>
<ul>
<li><a href="#521-fix-resolution">52.1. Fix Resolution</a></li>
<li><a href="#522-sdcard-on-vm">52.2. SDcard on VM</a></li>
</ul>
</li>
<li><a href="#53-latex">53. Latex</a></li>
<li><a href="#54-plex">54. Plex</a></li>
<li><a href="#55-format-phone">55. Format phone</a>
<ul>
<li><a href="#551-formatting">55.1. Formatting</a></li>
<li><a href="#552-connecting-to-pc">55.2. Connecting to PC</a></li>
<li><a href="#553-arch-linux-in-termux">55.3. ARCH LINUX IN TERMUX</a></li>
<li><a href="#554-process-to-format">55.4. Process to format</a></li>
<li><a href="#555-apps-adb">55.5. Apps ADB</a></li>
</ul>
</li>
<li><a href="#56-find-command">56. Find Command</a>
<ul>
<li><a href="#561-error-with-mv-command">56.1. Error with mv command</a></li>
</ul>
</li>
<li><a href="#57-conky-desktop">57. Conky Desktop</a>
<ul>
<li><a href="#571-install-conky-manager">57.1. Install conky-manager</a></li>
</ul>
</li>
<li><a href="#58-endeavouros-stuff">58. EndeavourOS Stuff</a>
<ul>
<li><a href="#581-relativamente-ao-barrier">58.1. Relativamente ao barrier</a></li>
</ul>
</li>
<li><a href="#59-map-keyboard-keys">59. Map Keyboard Keys</a></li>
<li><a href="#60-format-pen">60. Format Pen</a>
<ul>
<li><a href="#601-apagar-parti%C3%A7%C3%B5es">60.1. Apagar partições</a></li>
<li><a href="#602-criar-parti%C3%A7%C3%A3o">60.2. Criar Partição</a></li>
<li><a href="#603-format-pen-with-iso">60.3. Format pen with ISO</a></li>
</ul>
</li>
<li><a href="#61-borg-backup">61. Borg Backup</a>
<ul>
<li><a href="#611-setup-steps">61.1. Setup Steps</a></li>
<li><a href="#612-mount-backup-automatically">61.2. MOUNT BACKUP AUTOMATICALLY</a></li>
</ul>
</li>
<li><a href="#62-hdd-format">62. HDD Format</a>
<ul>
<li><a href="#621-delete-partitions">62.1. Delete Partitions</a></li>
<li><a href="#622-create-new-gpt-partition-table">62.2. Create New GPT partition table</a></li>
<li><a href="#623-format-disk">62.3. Format Disk</a></li>
<li><a href="#624-find-uuid-and-check-type">62.4. Find UUID and check type</a></li>
<li><a href="#625-fstab">62.5. Fstab</a></li>
</ul>
</li>
<li><a href="#63-ubuntu">63. Ubuntu</a>
<ul>
<li><a href="#631-fix-ethernet-unavailable">63.1. Fix ethernet unavailable</a></li>
</ul>
</li>
<li><a href="#64-problem-unknown-fs-type-vfat">64. PROBLEM: Unknown fs type vfat</a>
<ul>
<li><a href="#641-some-notes">64.1. Some notes</a></li>
</ul>
</li>
<li><a href="#65-permissions">65. Permissions</a>
<ul>
<li><a href="#651-fix-permissions">65.1. Fix permissions</a></li>
</ul>
</li>
<li><a href="#66-raspberry-pi">66. Raspberry Pi</a></li>
<li><a href="#67-plasma">67. Plasma</a>
<ul>
<li><a href="#671-packages">67.1. Packages</a></li>
<li><a href="#672-launch">67.2. Launch</a></li>
<li><a href="#673-autostart">67.3. Autostart</a></li>
<li><a href="#674-xdg-autostart-directories">67.4. XDG Autostart directories</a></li>
<li><a href="#675-autostart-manager">67.5. Autostart Manager</a></li>
<li><a href="#676-disable-kdeconnect">67.6. Disable kdeconnect</a></li>
<li><a href="#677-shortcuts">67.7. Shortcuts</a></li>
<li><a href="#678-config">67.8. Config</a>
<ul>
<li><a href="#6781-startup-and-shutdown--background-services">67.8.1. Startup and Shutdown → Background Services</a></li>
<li><a href="#6782-startup-and-shutdown--desktop-session">67.8.2. Startup and Shutdown → Desktop Session</a></li>
<li><a href="#6783-power-management--energy-saving">67.8.3. Power Management → Energy Saving</a></li>
<li><a href="#6784-display-and-monitor--night-color">67.8.4. Display and Monitor → Night Color</a></li>
<li><a href="#6785-window-management--task-switcher">67.8.5. Window Management → Task Switcher</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#68-misc">68. Misc</a></li>
</ul>
<h2 id="11-introduction">1.1. Introduction</h2>
<p>In this document I include some notes about general stuff I learn and do during my work/free time.</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="2-markdown-notes">2. Markdown Notes</h1>
<h2 id="21-vscode-extensions">2.1. VsCode extensions</h2>
<ul>
<li>Markdown all in One
<ul>
<li><code>Ctrl + Shift + P: Markdown All in One: section numbers, create table of contents, etc</code></li>
</ul>
</li>
<li>Markdown lint</li>
<li>vscode-pandoc
<ul>
<li>Ctrl + Shift + P -&gt; Pandoc Render</li>
<li>Add <code>&quot;pandoc.pdfOptString&quot;: &quot;-t html --css style.css&quot;</code> to <code>settings.json</code> in <code>.vscode/settings.json</code> in the work directory containing the markdown project. This <code>settings.json</code> overrides the global variables specified in that file. This can also be edited by doing <code>Ctlr+Shift+P: Preferences: Workspace Settings</code>. The <code>style.css</code> is put in the same folder of the <code>.md</code> file</li>
<li>`pacman -S pandoc pandoc-crossref wkhtmltopdf</li>
</ul>
</li>
<li>Markdown PDF<br>
We can add to the <code>setting.json</code> for vscode workspace to use a specific style to generate the pdf:</li>
</ul>
<pre class="hljs"><code><div>  &quot;markdown-pdf.styles&quot;: [
          &quot;style.css&quot;,
      ],
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="3-git-notes">3. Git notes</h1>
<h2 id="31-notes-on-creating-a-git-repository-on-github">3.1. Notes on creating a git repository on github</h2>
<p>On folder do:</p>
<pre class="hljs"><code><div> git init
 git commit
 git branch -M main
 git remote add origin https://github.com/jgroboredo/test.git
 git push -u origin main
</div></code></pre>
<h3 id="311-some-notes-on-the-above-commands">3.1.1. Some notes on the above commands</h3>
<ul>
<li><code>git branch -m master main</code></li>
</ul>
<blockquote>
<p>renames the master branch in local git repository</p>
</blockquote>
<ul>
<li>In the second step, we'll have to create a new branch on the remote named &quot;main&quot; - because Git does not allow to simply &quot;rename&quot; a remote branch. Instead, we'll have to create a new &quot;main&quot; branch and then delete the old &quot;master&quot; branch:
<code>git push -u origin main</code>
We now have a new branch on the remote named &quot;main&quot;.</li>
<li>When you clone a repository with git clone , it automatically creates a remote connection called origin pointing back to the cloned repository.</li>
<li>When you do a git push origin master, you are saying to git: &quot;Look git, I want to push the current branch I am on to the remote repository named origin, and I want to push to the master branch in that remote.&quot;. By default, the remote repository is named origin. I only need to specify where I want to push if there are more than 1 repositories.</li>
<li>When you execute the command: git remote add origin &quot;github repo link&quot; you are saying that for the current project, there is a remote repository with the name origin, with the address of &quot;github repo link&quot;</li>
</ul>
<h2 id="32-check-previous-commit">3.2. Check previous commit</h2>
<pre class="hljs"><code><div> git log
 git checkout &lt;commit_hash&gt; (example: 18e0b6a044a715b04bcacd599061b6b8bd586a7a)
 git checkout &lt;branch_to_return_to_present_state&gt;
</div></code></pre>
<h2 id="33-git-stash-and-log">3.3. Git stash and log</h2>
<pre class="hljs"><code><div> git log --stat -&gt; see which files were altered in each commit
 git stash; git stash list; git stash drop
</div></code></pre>
<h2 id="34-create-local-git-repository">3.4. Create local git repository</h2>
<ul>
<li>Create a folder which is going to be the &quot;server&quot; -&gt; For example, Notes.git</li>
<li>Inside the repository do: <code>git init --bare</code></li>
<li>On the same computer do: <code>git clone /path/to/server</code>   -&gt; the repository created this way will be linked to the &quot;server&quot; by an absolute path which only works on this same pc</li>
<li>On the other computer do: <code>git clone goncalo@ip:/path/to/server</code></li>
</ul>
<h2 id="35-change-the-author-name">3.5. Change the author name</h2>
<p><code>git config --global user.name &quot;John Doe&quot;</code></p>
<h2 id="36-remove-tracked-file-that-is-now-in-gitignore">3.6. Remove tracked file that is now in .gitignore</h2>
<p><code>git rm --cached &lt;file&gt;</code></p>
<h2 id="37-check-last-commit-changes">3.7. Check last commit changes</h2>
<p><code>git show --name-only</code> -&gt; Lists just the files in the last commit and doesn't give you the entire guts
<code>git diff HEAD^ HEAD</code> -&gt; HEAD^ identifies last commit</p>
<h2 id="38-installing-git-in-live-iso-arch">3.8. Installing git in live ISO arch</h2>
<p>If error in keys: <code>pacman -Sy archlinux-keyring; pacman-key --populate archlinux</code></p>
<h2 id="39-change-remote-url">3.9. Change remote URL</h2>
<ul>
<li><code>git remote -v</code></li>
</ul>
<blockquote>
<p>To check the present remote url</p>
</blockquote>
<ul>
<li><code>git remote set-url origin git@github.com:jgroboredo/Linux_Infos.git</code></li>
</ul>
<h2 id="310-add-remote-url">3.10. Add remote URL</h2>
<ul>
<li><code>git remote add name_of_remote git@github.com:jgroboredo/Linux_Infos.git</code></li>
<li><code>git push -u name_of_remote --all</code></li>
</ul>
<blockquote>
<p>Note: this changes the default repository! It also pushes all branches!</p>
</blockquote>
<ul>
<li><code>git config --edit</code></li>
</ul>
<blockquote>
<p>Can use this command to change the default git push</p>
</blockquote>
<ul>
<li><code>git branch --set-upstream-to &lt;remote-name&gt;</code></li>
</ul>
<blockquote>
<p>Set preferred remote for current branch</p>
</blockquote>
<ul>
<li><code>git branch branch_name --set-upstream-to &lt;remote-name&gt;/branch</code></li>
</ul>
<blockquote>
<p>set preferred remote for branch_name</p>
</blockquote>
<ul>
<li><code>git branch -vv</code></li>
</ul>
<blockquote>
<p>shows the default remote for the current branch</p>
</blockquote>
<h2 id="311-different-pushes">3.11. Different Pushes</h2>
<ul>
<li>To push all branches to all remotes:
<code>git remote | xargs -L1 git push --all</code></li>
<li>Push a specific branch to all remotes:
<code>git remote | xargs -L1 -I R git push R branch_name</code></li>
<li>To make a git alias for the command:
<code>git config --global alias.pushall '!git remote | xargs -L1 git push --all'</code></li>
</ul>
<p>Or</p>
<ul>
<li>Create an all remote with several repo URLs to its name:</li>
</ul>
<pre class="hljs"><code><div> git remote add all origin-host:path/proj.git
 git remote set-url --add all nodester-host:path/proj.git
 git remote set-url --add all duostack-host:path/proj.git
 git push all --all
</div></code></pre>
<p>Or</p>
<ul>
<li>If you want to always push to repo1, repo2, and repo3 but always pull only from repo1, set up the remote 'origin' as:</li>
</ul>
<pre class="hljs"><code><div> git remote add origin https://exampleuser@example.com/path/to/repo1
 git remote set-url --push --add origin https://exampleuser@example.com/path/to/repo1
 git remote set-url --push --add origin https://exampleuser@example.com/path/to/repo2
 git remote set-url --push --add origin https://exampleuser@example.com/path/to/repo3
</div></code></pre>
<ul>
<li>If you only want to pull from repo1 but push to repo1 and repo2 for a specific branch specialBranch:</li>
</ul>
<pre class="hljs"><code><div>  [remote &quot;origin&quot;]
     url = ssh://git@aaa.xxx.com:7999/yyy/repo1.git
     fetch = +refs/heads/*:refs/remotes/origin/*
     ...
  [remote &quot;specialRemote&quot;]
     url = ssh://git@aaa.xxx.com:7999/yyy/repo1.git
     pushurl = ssh://git@aaa.xxx.com:7999/yyy/repo1.git
     pushurl = ssh://git@aaa.xxx.com:7999/yyy/repo2.git
     fetch = +refs/heads/*:refs/remotes/origin/* (Note: Has origin here again, only pulls from origin)
     ...
  [branch &quot;specialBranch&quot;]
     remote = origin
     pushRemote = specialRemote
     ...
</div></code></pre>
<ul>
<li>My experience:
<ul>
<li>
<p>I can specify which remote to push or pull from:</p>
<pre class="hljs"><code><div>git push remote_name branch
</div></code></pre>
</li>
</ul>
<pre class="hljs"><code><div>- A branch has a default remote: I only need to specify the remote_name and eventually the branch_name (I can't pull from a non-default remote without specifying the branch) if I don't want to do it to the default one

</div></code></pre>
</li>
</ul>
<h2 id="312-use-curl-to-download-from-github">3.12. Use curl to download from github</h2>
<pre class="hljs"><code><div>curl -LkSs https://api.github.com/repos/jgroboredo/arch_install/tarball -o master.tar.gz
tar xf master.tar.gz
</div></code></pre>
<h2 id="312-download-a-file-from-github">3.12. Download a file from github</h2>
<ul>
<li>Go to file, click on raw, copy link</li>
<li><code>curl -L &quot;link_from_above_step&quot; &gt;&gt; output</code></li>
</ul>
<h2 id="313-merge-branches">3.13. Merge branches</h2>
<ul>
<li><code>git checkout master; git merge other_branch_name</code></li>
<li>Alternative:<code>git merge --no-ff other_branch_name</code> . Using --no-ff allows someone reviewing history to clearly see the branch you checked out to work on.</li>
<li><code>git branch -d branch_name</code></li>
</ul>
<blockquote>
<p>deletes branch locally</p>
</blockquote>
<ul>
<li><code>git push origin --delete branch_name</code></li>
</ul>
<blockquote>
<p>deletes a branch remotely</p>
</blockquote>
<ul>
<li><code>git fetch -p</code></li>
</ul>
<blockquote>
<p>Synchronize branch listing. After fetching, branches which no longer exist on the remote will be deleted.</p>
</blockquote>
<p>If I do a: <code>git pull origin master</code> on another branch, it will merge them.
After creating a new branch, we need to specify tracking information for the current branch. That means we need to do something like <code>git pull &lt;remote&gt; &lt;branch&gt;</code> for it to work.
On the other hand, we can simply set tracking information for the current branch by:
<code>git branch --set-upstream-to=origin/&lt;branch&gt; correction_chapter1</code></p>
<h2 id="314-check-merge-conflicts">3.14. Check merge conflicts</h2>
<p><code>git show --name-only [commit sha]</code> on a commit that was a merge containing conflicts and you'll see it as part of the message.</p>
<h2 id="315-merge-mistake-you-committed-changes-to-local-master">3.15. Merge mistake (You committed changes to (local) master)</h2>
<pre class="hljs"><code><div>git branch &lt;new-branch&gt;
git reset HEAD~ --hard
git checkout new-branch 
</div></code></pre>
<p>The first command creates the new branch we want to work with. The second command resets the main branch to just before the last commit, but leaves the changes you just made in the new branch. Finally, we switch to the new branch where your changes await you.
If you’ve made multiple commits, use <code>git reset HEAD~&lt;n&gt; --hard</code>, where <n> is the number of commits back you want to go.</p>
<h2 id="316-git-merge-%22deleted-by-us%22">3.16. Git merge &quot;Deleted by us&quot;</h2>
<p>Resolve all non deleted merge conflicts by hand, which you have to do anyway;
Type <code>git diff --name-only --diff-filter=U</code> to get a list of all remaining files in conflit. These files must be the ones you want deleted.
<code>git diff --name-only --diff-filter=U | xargs git rm</code></p>
<h2 id="317-commit-id-and-sha">3.17. Commit ID and SHA</h2>
<pre class="hljs"><code><div>git show -s --format=%H <span class="hljs-comment"># shows the last commit full id</span>
git show -s --format=%h <span class="hljs-comment"># shows the last commit sha</span>
</div></code></pre>
<h2 id="318-git-over-ssh-using-ssh-config">3.18. Git over ssh using ssh config</h2>
<p><code>git remote set-url origin ssh://pi(here config name)/home/goncalo/HDD/Documents/git_repos/Notes.git</code> (here full path)</p>
<h2 id="319-sparse-checkout">3.19. Sparse Checkout</h2>
<pre class="hljs"><code><div>mkdir &lt;repo&gt;
<span class="hljs-built_in">cd</span> &lt;repo&gt;
git init
git remote add -f origin &lt;url&gt;
</div></code></pre>
<p>This creates an empty repository with your remote, and fetches all objects but doesn't check them out.</p>
<p>Then: <code>git config core.sparseCheckout true</code></p>
<p>Now we define which files/folders we want to check out by editing <code>.git/info/sparse-checkout</code>:</p>
<pre class="hljs"><code><div><span class="hljs-built_in">echo</span> <span class="hljs-string">"some/dir/"</span> &gt;&gt; .git/info/sparse-checkout
<span class="hljs-built_in">echo</span> <span class="hljs-string">"another/sub/tree"</span> &gt;&gt; .git/info/sparse-checkout
</div></code></pre>
<p>Finally, just update the repo: <code>git pull origin master</code></p>
<h2 id="320-git-submodules">3.20. Git submodules</h2>
<h3 id="3201-add-submodule">3.20.1. Add submodule</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Add submodule to repository</span>
<span class="hljs-comment"># By default, submodules will add the subproject </span>
<span class="hljs-comment"># into a directory named the same as the repository</span>

git submodule add &lt;link_to_submodule&gt; &lt;optional_path&gt;

<span class="hljs-comment"># Although the submodule is a subdirectory in your working directory,</span>
<span class="hljs-comment"># Git sees it as a submodule and doesn’t track its </span>
<span class="hljs-comment"># contents when you’re not in that directory</span>

git diff --cached --submodule
</div></code></pre>
<h3 id="3202-clone-repo-with-submodule">3.20.2. Clone repo with submodule</h3>
<pre class="hljs"><code><div>git <span class="hljs-built_in">clone</span> &lt;main_project_link&gt;
git submodule init <span class="hljs-comment"># initializes local config file</span>
git submodule update <span class="hljs-comment"># fetch all the data from that project</span>

<span class="hljs-comment"># or</span>

git <span class="hljs-built_in">clone</span> --recurse-submodules

<span class="hljs-comment"># or</span>
git <span class="hljs-built_in">clone</span> &lt;main_project_link&gt;
git submodule update --init
</div></code></pre>
<h3 id="3203-pulling-in-upstream-changes-from-the-submodule-remote">3.20.3. Pulling in Upstream Changes from the Submodule Remote</h3>
<pre class="hljs"><code><div><span class="hljs-built_in">cd</span> &lt;git_submodule_dir&gt;
git fecth
git merge

<span class="hljs-comment"># or</span>

git submodule update --remote &lt;submodule_name&gt;

<span class="hljs-built_in">cd</span> &lt;main_project&gt;
git diff --submodule <span class="hljs-comment">#  get a list of commits that were added to the submodule</span>
git config --global diff.submodule <span class="hljs-built_in">log</span> <span class="hljs-comment"># to avoid the need to write --submodule in every git diff</span>

<span class="hljs-comment"># If you commit at this point then you will lock the submodule </span>
<span class="hljs-comment"># into having the new code when other people update.</span>

git config -f .gitmodules submodule.DbConnector.branch stable <span class="hljs-comment"># in order to track other branch</span>

<span class="hljs-comment"># if we leave off -f .gitmodules it will only make the change locally</span>

git config status.submodulesummary 1 <span class="hljs-comment"># to see a summary of changes to the submodules</span>
</div></code></pre>
<h3 id="3204-pulling-upstream-changes-from-the-project-remote">3.20.4. Pulling Upstream Changes from the Project Remote</h3>
<p>Now the perspective of the colaborator that cloned the Main Project.</p>
<p>Simply executing <code>git pull</code> is not enough.
By default, the git pull command recursively fetches submodules changes. However, it does not update the submodules.</p>
<pre class="hljs"><code><div>git submodule update --init --recursive

<span class="hljs-comment"># --init flag: MainProject might have added new submodules</span>
<span class="hljs-comment"># --recursive flag: if submodules have nested submodules</span>

<span class="hljs-comment"># or </span>

git pull --recurse-submodules
</div></code></pre>
<h3 id="3205-upstream-repository-changed-url-of-the-submodule">3.20.5. Upstream repository changed url of the submodule</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># copy the new URL to your local config</span>
$ git submodule sync --recursive
<span class="hljs-comment"># update the submodule from the new URL</span>
$ git submodule update --init --recursive
</div></code></pre>
<h3 id="3206-switching-from-subdirectories-to-submodules">3.20.6. Switching from subdirectories to submodules</h3>
<p>Problem:  we have been tracking files in our project and want to move them out into a submodule.</p>
<pre class="hljs"><code><div><span class="hljs-comment">#First unstage</span>
git rm -r SubDir
<span class="hljs-comment"># Then Add</span>
git submodule add &lt;submodule_link&gt;
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="4-bash-notes">4. Bash Notes</h1>
<h2 id="41-bash-note-1">4.1. Bash Note 1</h2>
<ul>
<li><code>$#</code>
<blockquote>
<p>number of arguments passed to the shell script</p>
</blockquote>
</li>
<li><code>$1, $2</code>, etc
<blockquote>
<p>identify the arguments passed to the script</p>
</blockquote>
</li>
</ul>
<h2 id="42-bash-note-2">4.2. Bash Note 2</h2>
<p>The code:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">case</span> <span class="hljs-variable">$1</span> <span class="hljs-keyword">in</span>
  -f|--from) command1; <span class="hljs-built_in">shift</span> ;;
  *)         command2;;
  <span class="hljs-keyword">esac</span>
  <span class="hljs-built_in">shift</span>
</div></code></pre>
<p>will check if the first argument <code>$1</code> passed to the script matches <code>-f</code> or <code>--from</code> or any other cases; The asterisk means that it does command2 if it doesn't match any of the cases above;
The &quot;shift&quot; command shifts the arguments, i.e., if I have <code>$1</code>, <code>$2</code> arguments, then <code>$2</code> -&gt; <code>$1</code>.</p>
<h2 id="43-bash-note-3">4.3. Bash Note 3</h2>
<p>The code:</p>
<p><code>SCRIPT_DIR=&quot;$( cd &quot;$( dirname &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&gt; /dev/null &amp;&amp; pwd )&quot;</code></p>
<p>will give you the full directory name of the script no matter where it is being called from.</p>
<h2 id="44-bash-note-4---compare-files">4.4. Bash Note 4 - Compare Files</h2>
<p><code>grep -F -x -v -f fileA fileB</code></p>
<blockquote>
<p>This works by using each line in <code>fileA</code> as a pattern (<code>-f fileA</code>) and treating it as a plain string to match (<code>-F</code>). You force the match to happen on the whole line <code>-x</code> and print out only the lines that don't match (<code>-v</code>). Therefore, you are printing out the lines in fileB that don't contain the same data as any line in fileA.</p>
</blockquote>
<h2 id="45-bash-note-5---use-of-curly-braces">4.5. Bash Note 5 - Use of curly braces</h2>
<ol>
<li>In the example:</li>
</ol>
<pre class="hljs"><code><div>  var=10        <span class="hljs-comment"># Declare variable</span>

  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${var}</span>"</span> <span class="hljs-comment"># One use of the variable</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$var</span>"</span>   <span class="hljs-comment"># Another use of the variable</span>
</div></code></pre>
<p>it makes no difference to use curly braces.</p>
<ol start="2">
<li>However, the <code>{}</code> in <code>${}</code> are useful if you want to expand the variable foo in the string <code>&quot;${foo}bar&quot;</code> since &quot;$foobar&quot; would instead expand the variable identified by foobar.</li>
</ol>
<p>Curly braces are also unconditionally required when:</p>
<ul>
<li>expanding array elements, as in <code>${array[42]}</code></li>
<li>using parameter expansion operations, as in <code>${filename%.*}</code> (remove extension)</li>
<li>expanding positional parameters beyond 9: <code>&quot;$8 $9 ${10} ${11}&quot;</code></li>
</ul>
<h2 id="46-bash-note-6---search-recursively-in-directory">4.6. Bash Note 6 - Search recursively in directory</h2>
<ul>
<li><code>grep -R &quot;stuff&quot;</code> will search recursively on all files on that directory and look for the word stuff</li>
<li><code>for i in **/.ipynb_checkpoints</code> will find recursively all directories with this name</li>
<li><code>for i in ./pattern</code> will search for this pattern in current directory</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="5-lyx">5. Lyx</h1>
<h2 id="51-configure-lyx">5.1. Configure lyx</h2>
<ul>
<li>Tools-Preferences-File Formats: PDF (pdflatex), shortname: pdf2, Viewer: Custom - zathura</li>
<li>Tools-Preferences-Output-PDF command: <code>zathura --synctex-forward $$n:1:$$t $$o</code></li>
<li>Tools-Preferences-Shortcuts-New: buffer-view pdf2 and buffer-update pdf2</li>
<li>For the spellchecker, might need to install hunspell-en_US and hunspel-pt_pt and enchant</li>
<li>For lgrenc.def not found -&gt; install texlive-langgreek</li>
<li>To use eps figures in lyx I need ghostscript : try to epstopdf on command line to discover this.</li>
</ul>
<h2 id="52-kpathsea">5.2. Kpathsea</h2>
<ul>
<li>Kpathsea is a library for path searching (e.g., for very quickly locating a given .sty file in a set of potentially large TEXMF trees, without doing a recursive directory tree trversal every time a given file is needed. (pse -&gt; pathsea)</li>
<li>kpsewhich minted.sy to search efficiently on tex library</li>
</ul>
<h2 id="53-configure-minted">5.3. Configure minted</h2>
<pre class="hljs"><code><div>sudo mkdir <span class="hljs-string">"/usr/share/texmf-texlive/tex/latex/minted/"</span>
sudo cp minted.sty <span class="hljs-string">"/usr/share/texmf-texlive/tex/latex/minted/"</span>
sudo mktexlsr
</div></code></pre>
<ul>
<li>
<p>Then in lyx, go to Tools/Tex Information, select latex styles and click rescan. minted.sty should appear in the list in lyx, go to &quot;Tools&gt;preferences&gt;file handling&gt;converters&quot; and find the converter from tex to pdflatex. Edit its command line adding the option &quot;-shell-escape&quot; (no quotes) into the Converter field, then click the Modify button next to the list of converters. This is equivalent to going to Documents-&gt;Formats-&gt;Allow running external programs (is a better solution since it avoids writting a warning message). Then click Apply in lyx, go to Document&gt;Settings and enter &quot;/usepackage{minted}&quot; (no quotes) in the latex preamble in lyx, in the part of your document where you want the highlighted code to appear, go to &quot;Insert&gt;TEX code&quot; to get an Evil Red Text (ERT) box</p>
</li>
<li>
<p>In Document-&gt;Settings-&gt;Listings, add following options:</p>
<ul>
<li>language=C++</li>
<li>frame=single</li>
<li>mathescape=true</li>
<li><code>syoek --synctex-forward $$n:1:$$t $$o</code></li>
</ul>
</li>
<li>
<p>Ordered bibliography: Use style unsrt and add to preamble: \usepackage{notoccite}</p>
</li>
</ul>
<h2 id="54-install-custom-cls">5.4. Install custom cls</h2>
<ul>
<li><code>latex my_class.ins</code> -&gt; produces my_class.cls</li>
<li><code>kpsewhich -var-value=TEXMFHOME</code> -&gt; prints path where to put cls</li>
<li>Regarding the above command, it's good to put the usual path: <code>$HOME/texmf/tex/latex/commonstuff/</code></li>
<li>kpsewhich my_class.cls -&gt; to check path of the class</li>
<li>Write lyx layout: In order to do this, find the basis class for our new class. For that, inspect my_class.cls and check the line LoadClass. It implies that my_class.cls is a descendent of that class (let's suppose it's dependent on report class). Then, in /usr/share/lyx/layouts copy report.layout, change its name to my_class.layout and edit like this:</li>
</ul>
<pre class="hljs"><code><div>  \DeclareLaTeXClass[my_class]{name_of_layout}
  Input report.layout
</div></code></pre>
<ul>
<li>In lyx, reconfigure. Now, name_of_layout is the text we see in Document-Class</li>
<li>Default classes: <code>/usr/share/texmf-dist/latex/elsarticle/elsarticle.cls</code></li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="6-qemu">6. Qemu</h1>
<h2 id="61-commands">6.1. Commands</h2>
<pre class="hljs"><code><div>qemu-img create -f qcow2 qemu_image 8G
qemu-system-x86_64 -smp 6 -m 4G -<span class="hljs-built_in">enable</span>-kvm -cdrom arch.iso -boot order=d qemu_image
smp (number of cores)

qemu-system-x86_64 -soundhw ac97 -k en-us -vga std -<span class="hljs-built_in">enable</span>-kvm -m 4G  -usbdevice tablet -smp 6 -<span class="hljs-built_in">enable</span>-kvm -boot c qemu_image
<span class="hljs-comment">#For no sound</span>
qemu-system-x86_64 -k en-us -vga std -<span class="hljs-built_in">enable</span>-kvm -m 4G  -usbdevice tablet -smp 6 -boot c qemu_image
</div></code></pre>
<h2 id="62-variables">6.2. Variables</h2>
<pre class="hljs"><code><div>-k en-us (keymap)
-usbdevice tablet

-cpu host
-smp 6 <span class="hljs-comment"># number of cores</span>
-machine <span class="hljs-built_in">type</span>=pc,accel=kvm
-<span class="hljs-built_in">enable</span>-kvm
-format=raw ??
-machine smm=off <span class="hljs-comment"># bug?</span>
-soundhw sb16,es1370

<span class="hljs-comment">#telnet access</span>
qemu-system-x86_64 -curses -monitor telnet:127.0.0.1:1234,server,nowait -boot c qemu_image
telnet 127.0.0.1 1234  -- <span class="hljs-keyword">in</span> another terminal

<span class="hljs-comment">#KVM Quick Check</span>
zgrep CONFIG_VIRTIO /proc/config.gz
lsmod | grep kvm
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="7-inkscape">7. Inkscape</h1>
<ul>
<li>If I have problems with eps images, in this case, also need to install ghostscript.</li>
<li>Do you have ImageMagick installed? LyX relies on ImageMagick to convert among graphics formats. It also needs Ghostscript installed (IM uses GS when the conversions involve PS, EPS or PDF files).</li>
<li>If <code>textext</code> package form the AUR gives problem, simply go to <strong>textext</strong> official website and install it from there</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="8-vscode">8. VsCode</h1>
<ul>
<li>You can format an entire file with Format Document (Ctrl+Shift+I)  or just the current selection with Format Selection (Ctrl+K Ctrl+F) in right-click context menu.</li>
<li>F1 -&gt; command pallet</li>
<li>SSH : F1 -&gt; Remote-SSH: Connect to Host...</li>
<li>Install extension: TabNine</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="9-zathura">9. Zathura</h1>
<ul>
<li><code>pacman -S zahtura-pdf-poppler</code></li>
<li>make zathura default pdf viewer: <code>mimeo --ad application/pdf zathura.desktop</code></li>
<li>to discover the real name of zathura.desktop run <code>locate zathura.desktop</code></li>
<li>to check that pdf files have the correct mimetype run <code>mimeo -m pdf_file.pdf</code></li>
<li>Clipboard: add <code>set selection-clipboard clipboard</code> to <code>~/.config/zahtura/zathurarc</code> or <code>/etc/zathurarc</code></li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="10-zsh">10. Zsh</h1>
<pre class="hljs"><code><div>git <span class="hljs-built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions ~/.zsh/zsh-autosuggestions
<span class="hljs-built_in">source</span> ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh <span class="hljs-keyword">in</span> .zshrc
mkdir .cache/zsh &amp;&amp; touch .cache/zsh/<span class="hljs-built_in">dirs</span>
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="11-jupyter">11. Jupyter</h1>
<h2 id="111-jupyter-lab">11.1. Jupyter-Lab</h2>
<p>To run over ssh, execute</p>
<pre class="hljs"><code><div>ssh -L 8888(port on <span class="hljs-built_in">local</span>):localhost::8889(port on remote) goncalo@ip jupyter-lab --no-browser --port=(same as before on remote)8889
</div></code></pre>
<ul>
<li>To avoid authentication by token: <code>jupyter server password</code></li>
<li>To list active sessions: <code>jupyter lab list</code></li>
<li>To kill a session: <code>jupyter lab stop 8888</code> (for e.g.)</li>
</ul>
<h2 id="112-opening-browser">11.2. Opening browser</h2>
<p>If jupyter doesn't open, do :
<code>jupyter lab build</code>
If command above gives permission error, do:</p>
<pre class="hljs"><code><div>sudo chown -hR {user} {dir}
jupyter notebook (lab) --generate-config 
</div></code></pre>
<p>Also, change redirect_file to false
Na verdade, isto não funciona porque tenho de mudar o <code>~/.profile</code> para firefox LOL</p>
<hr>
<ul>
<li>Can't access file (probably happens cause directory contains hidden folder .local):
<ul>
<li>set <code>c.ServerApp.use_redirect_file = False</code> in <code>~/.jupyter jupyter_server_config.py</code></li>
<li>Stop server:</li>
</ul>
<pre class="hljs"><code><div>    lsof -n -i4TCP:[port-number]
    <span class="hljs-built_in">kill</span> -9 [PID]
</div></code></pre>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="12-tmux">12. Tmux</h1>
<p>ssh host, tmux, run command, <code>ctr+b d</code>, exit. To check the tmux session, run <code>tmux attach</code></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="13-pacman">13. Pacman</h1>
<ul>
<li>Update pacman mirrors: <code>reflector --verbose --latest 5 --sort rate --save /etc/pacman.d/mirrorlist</code></li>
<li>Check recently installed packages: <code>grep -i installed /var/log/pacman.log</code></li>
</ul>
<h2 id="131-pacman-cache">13.1. Pacman cache</h2>
<pre class="hljs"><code><div>sudo ls /var/cache/pacman/pkg/ | wc -l <span class="hljs-comment"># checks cached packages</span>
du -sh /var/cache/pacman/pkg/ <span class="hljs-comment"># disk space occupied by cache</span>
sudo paccache -r <span class="hljs-comment"># cleans all packages except most recent 3</span>
sudo paccache -rk 1 <span class="hljs-comment"># keep only one most recent version</span>
sudo pacman -Sc <span class="hljs-comment"># remove all uninstalled packages</span>
sudo pacman -Scc <span class="hljs-comment"># remove installed and uninstalled packages from cache</span>
sudo paccache -ruk0 <span class="hljs-comment">#**** remove all versions of uninstalled packages</span>
change /etc/pacman.conf ParallelDownloads=5
</div></code></pre>
<h2 id="132-install-from-live-usb">13.2. Install from live usb</h2>
<pre class="hljs"><code><div>mount system: mount /dev/sdax /mnt
sudo pacman --root /mnt -S package
sudo pacman -Qkk | grep warning <span class="hljs-comment"># To verify the presence of the files  installed by a package</span>
sudo pacman --root /mnt -S $(sudo pacman --root /mnt -Qeq) --noconfirm <span class="hljs-comment"># reinstalls installed packages</span>
<span class="hljs-comment">#If need to remove aur packages:</span>
sudo pacman --root /mnt -Qeq &gt; packages.txt
sudo pacman --root /mnt -S $(cat packages.txt) --noconfirm
</div></code></pre>
<h2 id="133-pacman-infos">13.3. Pacman infos</h2>
<pre class="hljs"><code><div>pacman -Qe <span class="hljs-comment"># lists explicitly installed packages</span>
pacman -Rsc <span class="hljs-comment"># uninstalls (including unneeded dependencies)</span>
pacman -Qs <span class="hljs-string">"query"</span> <span class="hljs-comment"># search installed packages for keywords</span>
pacman -Qdt <span class="hljs-comment"># list unneeded packages</span>
pacman -Rns $(pacman -Qdtq) <span class="hljs-comment"># uninstall unneeded packages (nota: quando adicionei isto aos aliases, sempre que abri o terminal pedia-me a pass do sudo (estava a correr o que esta a frente de $)</span>
</div></code></pre>
<h2 id="134-pacman-mirrors">13.4. pacman mirrors</h2>
<p><code>sudo pacman-mirrors --fasttrack &amp;&amp; pacman -Syyu</code></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="14-grub">14. Grub</h1>
<ul>
<li>
<p>If no update-grub command, do:</p>
<pre class="hljs"><code><div>sudo nano /usr/sbin/update-grub
<span class="hljs-string">"
#!/bin/sh
set -e
exec grub-mkconfig -o /boot/grub/grub.cfg "</span><span class="hljs-variable">$@</span><span class="hljs-string">" 
"</span>
sudo chown root:root /usr/sbin/update-grub
sudo chmod 755 /usr/sbin/update-grub
</div></code></pre>
</li>
<li>
<p>If error syntax in grub-customizer:</p>
<ul>
<li>View -&gt; Show placeholders</li>
<li>select entry &quot;script code&quot;</li>
<li>remove</li>
</ul>
</li>
<li>
<p>check kernel by <code>uname -r</code></p>
</li>
</ul>
<h2 id="141-install-grub-manually-when-manjaro-fails">14.1. Install grub manually when manjaro fails</h2>
<ul>
<li>Deactivate CSM in BIOS</li>
<li>Quando acaba a instalacao, ver se ele cria a particao em /boot/efi ou /boot</li>
<li><code>sudo fdisk --list</code> (para ver onde foi instalada a particao no pc)</li>
<li><code>sudo su</code></li>
<li><code>mount /dev/sda2 /mnt</code> (em que sda2 era a particao com o linux)</li>
<li><code>mount /dev/sda1 /mnt/boot/efi</code></li>
<li><code>grub-install --target=x86_64-efi --efi-directory=/mnt/boot/efi --bootloader-id=manjaro --boot-directory=/mnt/boot --recheck --debug</code></li>
<li><code>manjaro-chroot -a</code></li>
<li><code>update-grub</code></li>
<li><code>umount -R /mnt</code></li>
</ul>
<p><a href="https://forum.manjaro.org/t/manjaro-grub-install-error-calamares-and-manual-the-why/125886">Link</a></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="15-vim">15. Vim</h1>
<ul>
<li><code>yay -S vim-plug-git</code></li>
<li>add <code>.vimrc</code> with the plugs I want</li>
<li>add folder <code>~/.vim/plugged/</code></li>
<li>to install plugs, do <code>:PlugInstall</code></li>
<li>for fzt pluggin: <code>:Files</code> command</li>
<li>For the NERDTree plugin to see icon of file, install: <code>yay -S nerd-fonts-complete</code>;
This font package my screw up font sizes of icons. To correct this, add to i3blocks config the following:</li>
</ul>
<pre class="hljs"><code><div>	&lt;span size='small' font_weight='light'&gt; icon &lt;/span&gt; 
</div></code></pre>
<p>        And change font on terminal to SauceCodePro Nerd Font Medium</p>
<ul>
<li>To open a file in a new tab in nerdtree, press t (or T); to open vertically click s;</li>
<li>To cycle through windows: C-W-W, C-W-H, C-W-L, C-W-J, C-W-K</li>
<li>To open file using fzf do:</li>
<li>CTRL+T to open in new tab</li>
<li>CTRL+X to open a new split</li>
<li>CTRL+V to open in a new vertical split</li>
<li>While in NERDTree, click on &quot;m&quot; to have a menu to do stuff with the file or other things</li>
<li><code>yay -S vim-youcompleteme-git</code> -&gt; vim autocompletion (Needs to be done separately from the installation of the dotfiles)</li>
<li>No need to add this plugin (vim-youcompleteme-git) to the <code>.vimrc</code> file</li>
<li>add: <code>let g:ycm_show_diagnostics_ui = 0</code> to disable error checking by YouCompleteMe</li>
<li><code>pacman -S python-black</code></li>
</ul>
<h2 id="151-install-vim-in-cluster">15.1. Install Vim in cluster</h2>
<pre class="hljs"><code><div>git <span class="hljs-built_in">clone</span> https://github.com/vim/vim.git
./configure --prefix=<span class="hljs-variable">$HOME</span>/.<span class="hljs-built_in">local</span> &amp;&amp; make &amp;&amp; make install
<span class="hljs-comment"># More flags: --disable-perlinterp --enable-rubyinterp --enable-multibyte --enable-pythoninterp --with-features=huge</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/home/youruser/.local/bin:<span class="hljs-variable">$PATH</span>"</span>
<span class="hljs-comment"># For plugins:</span>
mkdir .vim/<span class="hljs-built_in">autoload</span>
curl -fLo ~/.vim/<span class="hljs-built_in">autoload</span>/plug.vim --create-dirs \
https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</div></code></pre>
<p>Place in <code>.vimrc</code> before <code>plug#begin()</code>:</p>
<pre class="hljs"><code><div>let data_dir = has('nvim') ? stdpath('data') . '/site' : '~/.vim'
if empty(glob(data_dir . '/autoload/plug.vim'))
    silent execute '!curl -fLo '.data_dir.'/autoload/plug.vim --create-dirs  https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
    autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif
</div></code></pre>
<h2 id="152-vim-snippets">15.2. Vim snippets</h2>
<ul>
<li><code>:UltiSnipsEdit</code> command opens up a custom snippets file for the current language/filytype</li>
<li>Don't need the above step if I install vim-snippets plugin</li>
</ul>
<h2 id="153-manage-tabs">15.3. Manage Tabs</h2>
<ul>
<li>To move tabs -&gt; <code>Alt + arrows</code></li>
<li>To merge tabs -&gt; <code>Ctr + m</code> or <code>Ctrl + n</code>;</li>
<li>To exchange position of merged tabs -&gt; <code>&lt;C-w&gt; x</code>;</li>
<li>To change cursor position -&gt; <code>&lt;C-w&gt; w</code>;</li>
<li>To rotate windows -&gt; <code>&lt;C-w&gt; &lt;C-r&gt;</code></li>
</ul>
<h2 id="154-vim-surroundings">15.4. Vim surroundings</h2>
<ul>
<li>cs(atual)(target) -&gt; change surround from &quot;atual&quot; to &quot;target&quot;</li>
<li>ds&quot;  -&gt; delete surround &quot;</li>
<li>ysiw[ -&gt; yank surround inner word [ -&gt; puts [ surrounding the word the curson is in</li>
<li>ysf(smth)[ -&gt; puts [ surrounding current cursor position till smth</li>
</ul>
<h2 id="155-some-commands">15.5. Some commands</h2>
<ul>
<li>procurar coisas: /searchthing e usa-se n ou N para avançar para as seguintes</li>
<li>procurar string e substituir:</li>
</ul>
<pre class="hljs"><code><div>  :s/search/replace/
  :8,10 s/search/replace/g procura nas linhas 8 a 10
  :%s/search/replace/g procura no documento inteiro
  :%s/search/replace/gc pede confirmação para alterar
</div></code></pre>
<ul>
<li>copiar e colar:
selecionar o texto, y copia, p cola</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="16-lighdm">16. Lighdm</h1>
<pre class="hljs"><code><div>pacman -S lightdm-gtk-greeter-settings
change default greeter: /etc/lightdm/lightdm.conf under [Seat:*]
pacman -S archlinux-wallpaper
pacman -S materia-gtk-theme
yay -S pop-icon-theme-git
yay -S pop-gtk-theme
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="17-i3blocks">17. i3Blocks</h1>
<p>For the scripts to work, even if it is .py, need to chmod +x</p>
<ul>
<li>https://github.com/vivien/i3blocks-contrib/tree/master/</li>
<li>For calendar, install yad and xdotool; add:
<code>for_window [class='Yad'] floating enable</code></li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="18-pcmanfm">18. PcmanFM</h1>
<h2 id="181-basic-configuration">18.1. Basic Configuration</h2>
<ul>
<li>
<p>Go to edit -&gt; Preferences -&gt; Advanced :</p>
<ul>
<li>Set terminal emulator (ex: xfce4-terminal) -&gt; to open directly with vim for example</li>
<li>Set archiver integration: xarchiver</li>
</ul>
</li>
<li>
<p>To see thumbnails, install the following packages:</p>
<ul>
<li>poppler-glib</li>
<li>ffmpegthumbnailer</li>
<li>freetype2</li>
<li>raw-thumbnailer</li>
<li>tumbler</li>
<li>libgsf</li>
<li>libgepub</li>
</ul>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="19-mpv">19. MPV</h1>
<h2 id="191-annoying-bar-at-the-top">19.1. Annoying bar at the top</h2>
<ul>
<li>Change picom config: frame-opacity option</li>
</ul>
<h2 id="192-watch-stream">19.2. Watch stream</h2>
<ul>
<li><code>pacman -S yt-dlp</code></li>
<li><code>mpv 'link'</code></li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="20-mime-types">20. Mime-Types</h1>
<h2 id="201-alternative-to-xdg">20.1. Alternative to xdg:</h2>
<ul>
<li><code>yay -S mimeo</code></li>
<li><code>yay -S xdg-utils-mimeo</code></li>
</ul>
<p><a href="https://xyne.archlinux.ca/projects/mimeo/">MIMEO COMMANDS</a></p>
<ul>
<li>Open files (foo, bar, etc) : <code>mimeo foo bar baz</code></li>
<li>find Leafpad's desktop file: <code>mimeo --app2desk leafpad</code></li>
<li>determine &quot;test&quot; file's MIME-type: <code>mimeo -m test</code></li>
<li>associate &quot;application/x-shellscript&quot; with Leafpad: <code>mimeo --add application/x-shellscript leafpad.desktop</code></li>
<li>Associate all text files with Medit: <code>mimeo --add 'glob:text/*' medit.desktop</code></li>
<li>Association File Examples: (mimeo --assoc-help)</li>
</ul>
<pre class="hljs"><code><div>vlc --one-instance --playlist-enqueue %U
    ^https?://(www.)?youtube.com/watch\?.*v=

Open HTTP(S) URLs with Firefox:

/usr/bin/firefox %U   
    ^https?://

Open various media files in VLC by extension:

/usr/bin/vlc --one-instance --playlist-enqueue %F
  \.mp3$
  \.flac$
  \.avi$
</div></code></pre>
<ul>
<li>CUSTOM ASSOCIATION FILES (mimeo --help, mimeo --filepath-help
If --assoc is not passed then the following paths will be checked for custom associations, in order:</li>
</ul>
<pre class="hljs"><code><div>/home/goncalo/.config/mimeo/associations.txt
/etc/xdg/mimeo/associations.txt
</div></code></pre>
<p>Note: Eventually try mimi! Links:</p>
<ul>
<li><a href="https://github.com/taylorchu/mimi">repo</a></li>
<li><a href="https://aur.archlinux.org/packages.php?ID=56438">aur</a></li>
</ul>
<p>Note: eventually take a look at package perl-file-mimeinfo (mimeopen -d )</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="21-color-scheme">21. Color-Scheme</h1>
<ul>
<li>Install: python-pywal</li>
<li>Install: <code>yay -S fzwal-git</code></li>
<li>Run: <code>wal --theme base16-nord</code></li>
<li>Add to .zshrc: (<code>cat ~/.cache/wal/sequences &amp;</code>)</li>
<li>Add to .vimrc:
<ul>
<li>Plug 'dylanaraps/wal.vim' (install with PlugInstall)</li>
<li><code>colorscheme wal</code></li>
<li><code>set background=dark</code></li>
</ul>
</li>
</ul>
<p>NOTE:</p>
<ul>
<li>This pywal thing seems to screw up with other windows. Removed for now!</li>
<li>It seems like it isn't pywal that messed with firefox -&gt; Firefox stopped crahsing when I disabled the popOS gtk theme!!!</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="22-libreoffice">22. LibreOffice</h1>
<ul>
<li>Latex in impress: <code>pacman -S libreoffice-extension-texmaths</code></li>
<li>Check extension in Extension Manager inside libreoffice</li>
<li>To install ExpandAnimations go to Tools-&gt;ExtensionManager and add there the oxt file</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="23-reflector">23. Reflector</h1>
<pre class="hljs"><code><div>reflector --latest 200 --protocol http --protocol https --sort rate --save /etc/pacman.d/mirrorlist
reflector --country <span class="hljs-string">'France,Germany'</span> --age 12 --protocol https --sort rate --save /etc/pacman.d/mirrorlist
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="24-acestream">24. AceStream</h1>
<pre class="hljs"><code><div>yay -S acestream-engine
yay -S acestream-launcher
acestreamid
acestream-launcher acestream://id -p player 
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="25-swig">25. Swig</h1>
<pre class="hljs"><code><div>g++ -Wall -Wextra -Wpedantic -I/usr/include/python3.9 -I/usr/lib/python3.9/site-packages/numpy/core/include/ -fPIC -shared example_wrap.cxx -o _example.so -lpython3.9   
the first includes python and the second numpy/arrayobject.h
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="26-tty-login">26. TTY Login</h1>
<h2 id="261-add-username">26.1. Add Username</h2>
<pre class="hljs"><code><div>cat /etc/systemd/system/getty@tty1.service.d/override.conf:
  [Service]
  ExecStart=
  ExecStart=-/usr/bin/agetty -n -o &lt;username&gt; %I
systemctl edit getty@tty1
</div></code></pre>
<h2 id="262-change-startup-message">26.2. Change startup message</h2>
<ol>
<li>added script to bin folder that re-writes /etc/issue with the correct value of the  baterry. It uses a template situated in issue folder. This template has a PLACEHOLDER  text that is used by sed to substitute with the value of the battery. In order for this to work, I created a systemd service (check systemd_scripts folder) which runs the
script. Everything is situated in lap_dotfiles</li>
</ol>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="27-hpc">27. HPC</h1>
<h2 id="271-modules">27.1. Modules</h2>
<ul>
<li>To list all currently loaded modules: <code>module list</code></li>
<li>To list all available (loadable) modules: <code>module avail</code></li>
<li>To load a module: <code>module load x</code></li>
<li>To unload a module: <code>module unload x</code></li>
<li>To swap a specific module for another: <code>module switch x y</code></li>
</ul>
<h2 id="272-some-commands">27.2. Some Commands</h2>
<pre class="hljs"><code><div>sinfo
squeue
scontrol show partition/node/....
scancel (process_id)
<span class="hljs-comment"># Don't forget to load modules - e.g. -&gt; module load gcc-8.1, module load openmpi/4.0.1</span>
module avail <span class="hljs-comment"># to see modules</span>
srun -n 1 -p partition bash <span class="hljs-comment"># takes me to a shell inside the node</span>
</div></code></pre>
<p>Launch Script:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#!bin/bash</span>
<span class="hljs-comment">#SBATCH # instrucoes ao sbatch</span>
./ficheiro.out
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="28-network">28. Network</h1>
<h2 id="281-network-not-connecting-at-startup">28.1. Network not connecting at startup</h2>
<ul>
<li><code>systemctl restart NetworkManager</code></li>
</ul>
<h2 id="282-mac-address">28.2. MAC address</h2>
<ul>
<li>To find the default device -&gt; <code>ip route list</code></li>
<li>To find the mac address -&gt; <code>ifconfig -a</code></li>
<li>Alternatives:
<ul>
<li><code>ip addr show &amp;&amp; ip addr show device</code></li>
<li><code>ip link show</code></li>
</ul>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="29-dmenuext">29. Dmenu_ext</h1>
<h2 id="291-not-opening-paths">29.1. Not opening paths</h2>
<p>Add to mimeapps.list: inode/directory=pcmanfm.desktop;</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="30-nvidia">30. Nvidia</h1>
<h2 id="301-nvidia-back-screen-on-tty">30.1. NVIDIA back screen on TTY</h2>
<ul>
<li>
<p>/etc/modprobe.d/blacklist.conf:</p>
<pre class="hljs"><code><div>install i915 /usr/bin/<span class="hljs-literal">false</span>
install intel_agp /usr/bin/<span class="hljs-literal">false</span>
</div></code></pre>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="31-cfp-nvidia">31. CFP Nvidia</h1>
<h2 id="311-vpn-access">31.1. VPN access</h2>
<ul>
<li>Install snx from InfoCiencias</li>
<li>create .snxrc file</li>
<li>connect by snx</li>
<li>disconnect by snx -d</li>
</ul>
<h2 id="312-first-steps-to-config-account">31.2. First steps to config account</h2>
<ul>
<li>To create home directory by default: CREATE_HOME yes in /etc/login.defs</li>
<li>On first login had no home:
<ul>
<li>mkdir /home/username</li>
<li>chown username:username /home/username</li>
<li>cp -rT /etc/skel /home/username -&gt; to populate with default files and folders</li>
</ul>
</li>
<li>Generate ssh keys: ssh-keygen</li>
<li>Add .pub key to ~/.ssh/authorized_keys</li>
<li>The default shell was /bin/sh. So that bash works,
<ul>
<li>chsh
/bin/bash</li>
</ul>
</li>
<li>Can check shells by: cat /etc/shells</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="32-awk">32. Awk</h1>
<ul>
<li>
<p>Print every 3 lines</p>
<pre class="hljs"><code><div>awk <span class="hljs-string">'NR%3==0'</span> file
awk <span class="hljs-string">'NR%3==0'</span> file &gt;&gt; tmp &amp;&amp; mv tmp file -&gt; saving to file
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ./file_pattern ; <span class="hljs-keyword">do</span>
  awk <span class="hljs-string">'NR%3==0'</span> <span class="hljs-variable">$i</span> &gt;&gt; tmp &amp;&amp; mv tmp <span class="hljs-variable">$i</span> 
<span class="hljs-keyword">done</span>
<span class="hljs-comment"># The above cycle iterates over the files in the current directory</span>
</div></code></pre>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="33-sublime-text">33. Sublime-Text</h1>
<ul>
<li>
<p>Go to sublime text webpage, linux repos and find pacman. Follow the commands</p>
<ul>
<li>Go to preferences -&gt; package control (to install the package manager)</li>
<li>To install a package: Ctrl + Shift + p (command pallet) -&gt; Install -&gt; Package name</li>
<li>Imporant packages to install: (To see packges: Preferences-&gt;Package Control-&gt;List Packages)
<ul>
<li>SFTP</li>
<li>C++ Starting Kit</li>
<li>C++NamespaceTool</li>
<li>ClangFormat</li>
<li>Anaconda</li>
<li>C Improved</li>
<li>C++11</li>
<li>SideBarEnhancements</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Define shorcuts for sftp: Preferences-&gt;Package Settings-&gt;SFTP-&gt;Key Bindings
and write on the file on the right hand side with the directory:
.config/...../Packages/User/...
My first shortcuts were: alt+z(open files) e alt+x(open servers)</p>
</li>
<li>
<p>Example file for server setup:</p>
<pre class="hljs"><code><div>{
  // The tab key will cycle through the settings when first created
  // Visit https://codexns.io/products/sftp_for_subime/settings for help

  // sftp, ftp or ftps
  &quot;type&quot;: &quot;sftp&quot;,

  &quot;sync_down_on_open&quot;: true,
  &quot;sync_same_age&quot;: true,

  &quot;host&quot;: &quot;176.79.187.130&quot;,
  &quot;user&quot;: &quot;goncalo&quot;,
  //&quot;password&quot;: &quot;&quot;,
  //&quot;port&quot;: &quot;22&quot;,

  &quot;remote_path&quot;: &quot;/home/goncalo/Documents/Optics/NonLinearOptics_Interpolation/&quot;,
  //&quot;file_permissions&quot;: &quot;664&quot;,
  //&quot;dir_permissions&quot;: &quot;775&quot;,

  //&quot;extra_list_connections&quot;: 0,

  &quot;connect_timeout&quot;: 30,
  //&quot;keepalive&quot;: 120,
  //&quot;ftp_passive_mode&quot;: true,
  //&quot;ftp_obey_passive_host&quot;: false,
  //&quot;ssh_key_file&quot;: &quot;~/.ssh/id_rsa&quot;,
  //&quot;sftp_flags&quot;: [&quot;-F&quot;, &quot;/path/to/ssh_config&quot;],

  //&quot;preserve_modification_times&quot;: false,
  //&quot;remote_time_offset_in_hours&quot;: 0,
  //&quot;remote_encoding&quot;: &quot;utf-8&quot;,
  //&quot;remote_locale&quot;: &quot;C&quot;,
  //&quot;allow_config_upload&quot;: false,
}
</div></code></pre>
</li>
<li>
<p>To use clang on save:</p>
<ul>
<li>
<p>Install clang (pacman -S clang) and the clang package in sublime</p>
</li>
<li>
<p>Preferences-&gt;Package Settings-&gt;Clang Format-&gt;Setting-User:</p>
<pre class="hljs"><code><div>{
  &quot;binary&quot;: &quot;/usr/bin/clang-format-3.8&quot; (/path/to/your/clang-format/executable/file),
  &quot;format_on_save&quot;: true,
  &quot;style&quot;: &quot;Custom&quot;,
}
</div></code></pre>
</li>
<li>
<p>Preferences-&gt;Package Settings-&gt;Clang Format-&gt;Custom Style-User:</p>
<pre class="hljs"><code><div>{
  &quot;Language&quot;: &quot;Cpp&quot;,
  &quot;TabWidth&quot;: 4,
  &quot;AlignTrailingComments&quot;: &quot;true&quot;,
  &quot;UseTab&quot;: &quot;Never&quot;,
}
or 
Language: Cpp
BreakBeforeBraces: Attach
PointerAlignment: Right
TabWidth: 4
IndentWidth: 4
AccessModifierOffset: 0
ColumnLimit: 120
NamespaceIndentation: All
AlignTrailingComments: true
AllowAllParametersOfDeclarationOnNextLine: true
AlwaysBreakTemplateDeclarations: true
UseTab: Never
</div></code></pre>
</li>
</ul>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="34-config-printer">34. Config-Printer</h1>
<h2 id="341-cups">34.1. CUPS</h2>
<ul>
<li>
<p>Packages to install:</p>
<ul>
<li>cups, cups-filters, liblouis, qpdf, cups-pdf, python-pycups, python-pycurl, gsfonts</li>
<li>system-config-printer</li>
</ul>
</li>
<li>
<p>Services to activate</p>
<pre class="hljs"><code><div>sudo systemctl <span class="hljs-built_in">enable</span> --now cups.service
sudo systemctl <span class="hljs-built_in">enable</span> --now cups.socket
sudo systemctl <span class="hljs-built_in">enable</span> --now cups.path
</div></code></pre>
</li>
<li>
<p>List services:
<code>sudo systemctl -a list-units | grep -i cups</code></p>
</li>
<li>
<p>Configuration:</p>
<ul>
<li>Verify the following user groups are set in file /etc/cups/cups-files.conf
<code>SystemGroup sys root wheel</code></li>
<li>Associate a user to the &quot;sys&quot; group by replacing &quot;username&quot; below:
<code>gpasswd -a username sys</code></li>
</ul>
</li>
<li>
<p>Add A Printer Using CUPS Web Interface</p>
<ul>
<li>Open &quot;Manage Printing&quot; or browse to http://localhost:631/</li>
<li>Click on “Administration” at the top of the web page.</li>
<li>Click on “Add Printers”.</li>
<li>Select the desired printer under &quot;Discovered Network Printers&quot; and click the &quot;Continue&quot; button.</li>
<li>Set the &quot;Name&quot;, &quot;Description&quot; and &quot;Location&quot; and then clock on the &quot;Continue&quot; button.</li>
<li>Select the &quot;Model&quot; of printer and click the &quot;Add Printer&quot; button.</li>
<li>Select default options and click the &quot;Set Default Options&quot; button.</li>
</ul>
</li>
<li>
<p>Add A Printer Using Printer Settings
This utilizes &quot;Printer Settings&quot; (system-config-printer package) a native GUI application.</p>
<ul>
<li>Open &quot;Printer Settings&quot;.</li>
<li>Click on the &quot;Unlock&quot; button.</li>
<li>Click on the &quot;Add&quot; button.</li>
<li>Select the desired printer and click the &quot;Forward&quot; button.</li>
<li>Set the desired &quot;Printer Name&quot;, &quot;Description&quot; and &quot;Location&quot;.</li>
<li>Click the &quot;Apply&quot; button.</li>
</ul>
</li>
</ul>
<p>After these steps, it should work. Do not need to go for avahi!!!!</p>
<h2 id="342-avahi">34.2. AVAHI</h2>
<ul>
<li>Packages to install:
<ul>
<li>avahi, nss-mdns</li>
</ul>
</li>
<li><code>sudo systemctl enable avahi-daemon.service</code></li>
<li>edit the file /etc/nsswitch.conf and change the hosts line to include
<code>mdns_minimal [NOTFOUND=return]</code>
before the word resolve</li>
<li>avahi-browse --all --ignore-local --resolve --terminate
or</li>
<li>avahi-discover (needs gtk3, dbus-python and python-gobject)</li>
</ul>
<p>The question is not avahi or cups but : Do I need/want printer autodiscovery or not ?
If answer is yes &gt; enable avahi , if answer is no &gt; disable avahi
Either use cups or cups + avahi</p>
<h2 id="343-hp-scanner">34.3. HP SCANNER</h2>
<ul>
<li>wiki page: SANE/Scanner-specific problems</li>
<li>pacman -S sane-airscan ipp-usb</li>
<li>pacman -S hplip</li>
<li>Go to system-config-printer and now add printer (printing should work from now on).
In order to scan:
<ul>
<li><code>hp-makeuri &lt;scanner_ip&gt; / scanimage -L</code></li>
<li><code>scanimage --device &quot;&lt;hpaio:/net....&gt;&quot; --format=png --resolution 300 &gt;scan.png</code></li>
</ul>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="35-sway">35. Sway</h1>
<h2 id="351-packages-to-check-for-base-arch-install">35.1. Packages to check for base arch install</h2>
<pre class="hljs"><code><div>pacman -S grub efibootmgr networkmanager network-manager-applet dialog wpa_supplicant mtools dosfstools reflector base-devel linux-headers avahi xdg-user-dirs xdg-utils gvfs gvfs-smb nfs-utils inetutils dnsutils bluez bluez-utils cups hplip alsa-utils bash-completion openssh rsync reflector acpi acpi_call tlp virt-manager qemu qemu-arch-extra edk2-ovmf bridge-utils dnsmasq vde2 openbsd-netcat iptables-nft ipset firewalld flatpak sof-firmware nss-mdns acpid os-prober ntfs-3g terminus-font
pacman -S xdg-desktop-portal-wlr
</div></code></pre>
<h2 id="352-services">35.2. Services</h2>
<pre class="hljs"><code><div>systemctl <span class="hljs-built_in">enable</span> NetworkManager
systemctl <span class="hljs-built_in">enable</span> bluetooth
systemctl <span class="hljs-built_in">enable</span> cups.service
systemctl <span class="hljs-built_in">enable</span> sshd
systemctl <span class="hljs-built_in">enable</span> avahi-daemon
systemctl <span class="hljs-built_in">enable</span> tlp <span class="hljs-comment"># You can comment this command out if you didn't install tlp, see above</span>
systemctl <span class="hljs-built_in">enable</span> reflector.timer
systemctl <span class="hljs-built_in">enable</span> fstrim.timer
systemctl <span class="hljs-built_in">enable</span> libvirtd
systemctl <span class="hljs-built_in">enable</span> firewalld
systemctl <span class="hljs-built_in">enable</span> acpid
</div></code></pre>
<h2 id="353-sway-install-from-yt">35.3. Sway install from YT:</h2>
<p><code>pacman -S sway swaylock swayidle xorg-xwayland ttf-font-awesome</code></p>
<h2 id="354-sway-my-experience">35.4. Sway my experience</h2>
<h3 id="3541-packages">35.4.1. Packages</h3>
<pre class="hljs"><code><div>pacman -S sway swaylock
pacman -S mako grim
yay -S grimshot
pacman -S wl-clipboard
pacman -S light (manage brightness)
pacman -S playerctl (waybar config)
pacman -S waybar
yay -S swaylock-effects-git
pacman -S swayidle
pacman -S xdg-desktop-portal-wlr
pacman -S dex
yay -S rambox-bin
yay -S albert-minimal
pacman -S pamixer
pacman -S brightnessctl
yay -S nordic-theme
yay -S clipman
<span class="hljs-comment"># installed i3-quickterm from github: https://github.com/lbonn/i3-quickterm.git</span>
</div></code></pre>
<h3 id="3542-configuration">35.4.2. Configuration</h3>
<ul>
<li>The first config lines are concerned with environment variables needed to make gtk applications launch faster:
<ul>
<li>exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK</li>
<li>exec hash dbus-update-activation-environment 2&gt;/dev/null &amp;&amp; <br>
dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK</li>
</ul>
</li>
<li>The keyboard and touchpad are configured in sway config. To get the inputs run: swaymsg -t get_inputs</li>
<li>using i3-quickterm to have a dropdown menu. Need to install rofi for it to work but I can also use i3-quickterm shell and then I do not need to install rofi.</li>
<li>binding albert in config with exec albert toggle</li>
<li>using swaylock-effects-git for sway lock</li>
<li>Using &quot;exec grimshot copy area&quot; for screenshots (requires wl-clipboard)</li>
<li>Bind media keys (brightness and volume) on config. Associated icons to notifications. The icons are from Arc-X-D package.</li>
<li>If I want to use light, need to add the following line to sudoers: %wheel ALL=(root) NOPASSWD: /usr/bin/light</li>
<li>Install playerctl for these controls and waybar.</li>
<li>For the autostart applications, need to add the flag --indicator to nm-applet</li>
<li>For the dual monitor, check the monitor with swaymsg -t get_outputs</li>
<li>Sway doesn't work very well with lightdm -&gt; use lydm -&gt; systemctl enable ly.service -f</li>
<li>Instead of using ly, simply use .zprofile to login. For it to work, need whiptail and
Rebelo's package shiftstate (it is on lap_dotfiles). Ctr+Enter after putting pw on
tty takes me to a tui to choose the wm. Shift+Enter takes me to tty login</li>
<li>The env variable MOZ_ENABLE_WAYLAND=1 enables to run firefox on wayland mode.
However, it doesn't load the gtk theme this way. Then, I added to .confi/sway/env the
flag GTK_THEME=Nordic. Need to change this in accordance to the gtk theme I want</li>
</ul>
<h3 id="3543-fix-cannot-open-display">35.4.3. Fix cannot open display</h3>
<p><code>pacman -S xorg-server-xwayland</code></p>
<h3 id="3544-mathematica">35.4.4. Mathematica</h3>
<ul>
<li>In order to run mathematica: <code>QT_QPA_PLATFORM=&quot;xcb&quot; mathematica &amp;</code></li>
<li>A better way is to add a folder: $HOME/bin and the following script name mathematica
(same name as the original in /usr/local/bin):<pre class="hljs"><code><div><span class="hljs-meta">#!/bin/sh</span>
QT_QPA_PLATFORM=<span class="hljs-string">"xcb"</span> /usr/<span class="hljs-built_in">local</span>/bin/mathematica <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</div></code></pre>
</li>
<li>Then, if in sway, add to the env script in .config/sway the following line:
<code>PATH=&quot;${HOME}/bin:${PATH}&quot;</code>
The fact that $HOME/bin comes before path overrides the original mathematica script!Now,
I can launch mathematica from dmenu</li>
<li>Although the above steps solve the problem when we call the binary mathematica,
it doesn't solve the problem when we want to open a mathematica notebook through the
file manager. To solve that problem I need to change the wolfram-mathematica12.desktop
file in /usr/share/applications/wolfram-mathematica12.desktop. In the field exec I need
to put the path to $HOME/bin/mathematica script. I saved the original desktop file in  /usr/share/applications/mathematica.desktop.</li>
<li>mathematica was crashing with 3D graphics. Solution: run mathematica with mesa: mathematica -mesa notebook_name.</li>
</ul>
<h3 id="3545-zoom">35.4.5. Zoom</h3>
<ul>
<li>Currently doesn't allow for sreen sharing. Use zoom in firefox and it works fine!</li>
<li>Eventually try XGD_CURRENT_DESKTOP=gnome zoom</li>
</ul>
<h3 id="3546-albert">35.4.6. Albert</h3>
<ul>
<li>albert crashing after search or cancelling search: rm .config/albert/core.db</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="36-rclone">36. Rclone</h1>
<h2 id="361-config">36.1. Config</h2>
<ul>
<li>rclone is best configured using ssh-agent:
<ul>
<li>rclone config</li>
</ul>
</li>
<li>new remote</li>
<li>Storage &gt; sftp</li>
<li>host: 192.168.1.64 (e.g)</li>
<li>user: goncalo (e.g)</li>
<li>ssh port: blank</li>
<li>To use ssh-agent, leave all the other options blank (and eventually refuse them)</li>
</ul>
<h2 id="362-rclone-union">36.2. Rclone union</h2>
<pre class="hljs"><code><div>[paulo_http_single]
type = http
url = https://joserebelo:PASSWORD@paulo

[paulo_http]
type = union
upstreams = paulo_http_single:/:ro /cache/union
</div></code></pre>
<ul>
<li>The first part on the union config is read-only but <code>/cache/union</code> is not, allowing to add our own stuff</li>
<li>We need to mount (for the union to work) the <code>[paulo_http]</code> one.</li>
<li>what we write in the mounted drive will go to /cache/union and reading merges both</li>
</ul>
<h2 id="363-problem">36.3. Problem</h2>
<ul>
<li>
<p>NewFs: couldn't connect SSH: ssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey], no supported methods remain</p>
</li>
<li>
<p>This was happening because of the type of keys. I should generate: ssh-keygen -t ed25519</p>
</li>
<li>
<p>Solution: add to /etc/ssh/sshd_config: PubkeyAcceptedAlgorithms=+ssh-rsa</p>
</li>
<li>
<p>I should also add:</p>
<pre class="hljs"><code><div>PermitRootLogin no
PasswordAuthentication no
</div></code></pre>
</li>
</ul>
<h2 id="364-sync">36.4. Sync</h2>
<ul>
<li><code>rclone sync /home/goncalo/Documents pi:/home/goncalo/HDD/Documents/Backups/Laptop/Documents --log-file /home/goncalo/.local/my_logs/backup.log -v --exclude lap_dotfiles/ --transfers=8 --progress</code></li>
<li>-i flag asks question about copying</li>
</ul>
<h2 id="365-onedrive">36.5. OneDrive</h2>
<ul>
<li><code>rclone copy UsefulScripts OneDrive:Documents/UsefulScripts</code> (copies the contents of UsefulScripts -&gt; therefore I copy to Documents/UsefulScripts, otherwise would populate Documents with its contents)</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="37-pipewire">37. Pipewire</h1>
<ul>
<li><code>pacman -S pipewire</code></li>
<li><code>pacman -S pipewire-pulse</code>. Remove pulseaudio and pulseaudio-bluetooth</li>
<li>It automatically creates symlink <code>/etc/systemd/user/sockets.target.wants/pipewire-pulse.socket → /usr/lib/systemd/user/pipewire-pulse.socket</code></li>
<li>Disable pulseaudio on sway config</li>
<li><code>pacman -S libpulse</code> (comes with pulseaudio)</li>
<li><code>pacman -Qo pactl</code></li>
<li>bluetooth should not be affected by this</li>
<li>pacmd used by volume-script no longer works. Need to use amixer (which comes with alsa-utils) to check if muted or not.</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="38-fail2ban">38. Fail2Ban</h1>
<ul>
<li><code>pacman -S fail2ban</code></li>
<li>enable/start fail2ban.service</li>
</ul>
<h2 id="381-configuration">38.1. Configuration</h2>
<p>Edit file /etc/fail2ban/jail.local:</p>
<pre class="hljs"><code><div>[DEFAULT]
bantime = -1
findtime = 1d
maxretry = 5

[sshd]
enabled = true
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="39-systemd-resolved">39. Systemd-Resolved</h1>
<p><code>/etc/systemd/resolved.conf</code>:</p>
<pre class="hljs"><code><div>[Resolve]
DNS=1.1.1.1#cloudflare-dns.com 9.9.9.9#dns.quad9.net
FallbackDNS=1.0.0.1#cloudflare-dns.com 9.9.9.10#dns.quad9.net
DNSSEC=yes
DNSOverTLS=yes
Cache=yes
CacheFromLocalhost=no
DNSStubListener=yes
ReadEtcHosts=yes
</div></code></pre>
<p><code>/etc/resolv.conf</code>:</p>
<p><code>ln -rsf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf</code></p>
<p><code>/etc/NetworkManager/NetworkManager.conf</code>:</p>
<pre class="hljs"><code><div>[main]
# Ignore network-provided dns
dns = none
</div></code></pre>
<h2 id="391-activate-service">39.1. Activate Service:</h2>
<p><code>systemctl enable systemd-resolved.service</code></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="40-dual-boot">40. Dual Boot</h1>
<h2 id="401-windows-after-linux">40.1. Windows After Linux</h2>
<ul>
<li>Install windows;</li>
<li>Boot live iso; mount disk with linux:
<ul>
<li><code>mount /dev/sdX2 /mnt</code></li>
<li><code>mount /dev/sdX1 /mnt/boot/efi</code></li>
<li><code>manjaro-chroot /mnt</code></li>
<li><code>update-grub</code></li>
</ul>
</li>
<li>If windows keeps changing boot entry order:
<ul>
<li>Install EasyUefi (easyuefi.com)
<ul>
<li>Go to Manage EFI boot option</li>
</ul>
</li>
<li>Check the path to the manjaro boot option</li>
<li><code>Bcdedit /set {bootmgr} path path\from\above\step</code> (e.g. \EFI\Manjaro\grubx64.efi)</li>
</ul>
</li>
</ul>
<h2 id="402-fix-windows-bootloader-gone">40.2. Fix Windows bootloader Gone</h2>
<ul>
<li>shift+f10</li>
<li>diskpart</li>
<li>list disk</li>
<li>select disk X (Where windows was installed)</li>
<li>list volume</li>
<li>select volume Y</li>
<li>assign letter=Z (where Z is the letter you want to &quot;mount&quot;)</li>
<li>do the same to efi partition:
<ul>
<li>list disk</li>
<li>select disk X (Where is the EFI partition)</li>
<li>list volume</li>
<li>select volume volume-number</li>
<li>assign letter=M</li>
</ul>
</li>
<li>exit diskpart (exit)</li>
<li>run: <code>bcdboot &lt;Letter-Assigned-To-Windows&gt;:\Windows</code>
eg: bcdboot Z:\Windows
<ul>
<li>optionally: <code>bcdboot Z:\Windows /s M:</code> (/s copies to drive M)</li>
</ul>
</li>
<li>Unmount devices:
<ul>
<li>diskpart</li>
<li>list volume</li>
<li>select volume VOLUME-NUMBER</li>
<li>remove letter DRIVE_LETTER</li>
</ul>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="41-rp-monitor">41. RP Monitor</h1>
<ul>
<li>for the monotoring need 3 docker containers: grafana, influxdb (database), telegraf
<ul>
<li>the ports on docker-compose need to match the ones in telegraf.conf</li>
<li>In the telegraf conf:
<ul>
<li>urls: needs to be 127.0.0.1:(port of docker compose)</li>
<li>username and pw must match what I put in influxdb</li>
<li>hostname must be the one on of pi</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="411-create-db-in-influxdb">41.1. Create db in influxdb</h2>
<pre class="hljs"><code><div>docker <span class="hljs-built_in">exec</span> -it influxdb bash 
influx
CREATE USER <span class="hljs-string">"grafana"</span> WITH PASSWORD <span class="hljs-string">'qwe'</span> (pw configured <span class="hljs-keyword">in</span> grafana)
CREATE USER <span class="hljs-string">"telegraf"</span> WITH PASSWORD <span class="hljs-string">'asd'</span> (pw put on config)
CREATE DATABASE <span class="hljs-string">"pi"</span>
GRANT ALL ON <span class="hljs-string">"pi"</span> TO <span class="hljs-string">"grafana"</span>
GRANT ALL ON <span class="hljs-string">"pi"</span> TO <span class="hljs-string">"telegraf"</span>
SHOW DATABASES
</div></code></pre>
<h2 id="412-config-grafana">41.2. CONFIG GRAFANA</h2>
<ul>
<li>add data source:
<ul>
<li>Configuration -&gt; Data Sources:</li>
<li>url: http://influxdb:8086</li>
<li>database: pi</li>
<li>User: grafana (same as defined in influxdb)</li>
<li>Pw: same as defined in influxdb</li>
</ul>
</li>
<li>import dashboard:
<ul>
<li>ID: 10578</li>
<li>Select data source added above</li>
</ul>
</li>
</ul>
<h2 id="413-notes">41.3. Notes</h2>
<ul>
<li>In order to restart a container do docker-compose up container_name (this reloads the yml if it changed); otherwise use docker-compose restart container_name</li>
<li><code>docker rm -f container_name</code> (deletes container)</li>
<li><code>docker inspect influxdb | jq &quot;.[0].Config.Volumes&quot;</code></li>
<li>In telegram.conf I need 127.0.0.1 : nas portas means &quot;bind to all addresses&quot; mas aqui quero mesmo aceder ao localhost</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="42-docker">42. Docker</h1>
<ul>
<li>
<p><code>pacman -S docker docker-compose</code></p>
</li>
<li>
<p><code>systemctl enble docker.service</code></p>
</li>
<li>
<p>docker info; <code>sudo chmod 666 /var/run/docker.sock</code></p>
</li>
<li>
<p>On folder, run: <code>docker-compose up -d</code></p>
</li>
<li>
<p>To access things on the web, check the port on .yml file and: http://localhost:8080</p>
</li>
<li>
<p>To access using any device on the network, substitute 127.0.0.1 to 0.0.0.0 in all containers in the .yml file
Then, only need to do ip(192.168.1.64):port on any device and it will work.</p>
</li>
<li>
<p>Login on web: admin, pw: adminadmin</p>
</li>
<li>
<p>On qbittorrent, tools-&gt;options-&gt;default save path: /downloads/</p>
<p>Notes on the downloads folder:</p>
<ul>
<li>It is important that this folder is mounted to some directory on my computer (check docker-compose) and that this mount point is the same in radarr/sonarr. Radarr/sonarr will check the download folder in the qbittorrent settings (which is /downloads) and will therefore look in the directory /downloads. Therefore, /downloads must be a volume in docker-compose and should point to the same folder as in qbittorrent.</li>
</ul>
</li>
<li>
<p>On qbittorrent, tools-&gt;options-&gt;(under automatically add torrents from) Monitored Folder -&gt; /blackhole</p>
</li>
<li>
<p>Get image: https://hub.docker.com/r/linuxserver/radarr</p>
</li>
<li>
<p><code>docker ps -a</code> -&gt; check running containers</p>
</li>
<li>
<p>To set pw and username on qbittorrent: Tools -&gt; Options -&gt; Connection -&gt; Authentication</p>
</li>
<li>
<p>Rebuild image: docker-compose build rclone-extension --no-cache</p>
</li>
</ul>
<h2 id="421-jacket">42.1. Jacket</h2>
<ul>
<li>http://localhost:9117</li>
<li>Add indexer -&gt; RARBG and 1337x;</li>
</ul>
<h2 id="422-sonarr">42.2. Sonarr</h2>
<ul>
<li>
<p>Download clients -&gt; Clicl + -&gt; Select qbittorrent -&gt; host é qbittorrent (you can access containers by name)</p>
</li>
<li>
<p>Port: 8080</p>
</li>
<li>
<p>Username and Pw : same as qbittorrent login (admin, adminadmin)</p>
</li>
<li>
<p>We can access a container from the terminal: docker exec -it qbittorrent bash</p>
</li>
<li>
<p>Go to Indexers -&gt; Select Torznab -&gt; In URL paste the Torznab feed from jackett (and change localhost to jackett in the URL)</p>
</li>
<li>
<p>Add API key from jackett (on top of the page)</p>
</li>
<li>
<p>If this doesn't work, change dns:</p>
<ul>
<li><code>vim /etc/resolv.conf</code></li>
<li><code>nameserver 1.1.1.2</code></li>
</ul>
</li>
<li>
<p>vim /etc/NetworkManager/NetworkManager.conf</p>
<pre class="hljs"><code><div>[main]
# Ignore network-provided dns
dns = none
</div></code></pre>
</li>
<li>
<p>check if I can ping from jackett: <code>docker exec -it jackett bash; curl 1337x.to</code></p>
</li>
<li>
<p><code>systemctl restart docker</code></p>
</li>
<li>
<p><code>docker-compose up -d</code></p>
</li>
<li>
<p>When adding series, the root folder should be: /media -&gt; this is mapped to a volume outside the container</p>
</li>
<li>
<p>qbittorrent downloads to /downloads and sonarr moves it to /media</p>
</li>
<li>
<p>old episodes on sonarr must be downloaded manually</p>
</li>
<li>
<p>A lupa saca automatico e o boneco deixa escolher o torrent</p>
</li>
<li>
<p>If I can't add indexer, I can add one that I know that works and then edit it and substitute the url for the one I want to add.</p>
</li>
<li>
<p>Add series on read-only file system:</p>
<ul>
<li>Mount read-only fs inside container</li>
<li>Add new series to default path where sonarr can write</li>
<li>Open sqlitebrowser -&gt; Open Database -&gt; sonardb (inside config folder in container) -&gt; In table, select Series -&gt; find series -&gt; Select Path -&gt; Change on the right</li>
</ul>
</li>
</ul>
<h2 id="423-system-service-to-run-docker">42.3. System service to run docker</h2>
<pre class="hljs"><code><div>/etc/systemd/system/docker-compose.service

[Unit]
Description=Docker Compose Service
Requires=docker.service
After=docker.service
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/home/jose/dotfiles/pi
ExecStart=/usr/sbin/docker-compose up -d
ExecStop=/usr/sbin/docker-compose down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
</div></code></pre>
<h2 id="424-rclone-dlna">42.4. Rclone DLNA</h2>
<ul>
<li>Settings -&gt; Download clients -&gt; Advanced options -&gt; Enable remove imported downloads from download client history</li>
<li>This is streaming the /media folder to my network</li>
<li>In VLC go to view -&gt; playlist -&gt; local network -&gt; universal plug and play</li>
</ul>
<h2 id="425-transdrone">42.5. Transdrone</h2>
<p>Description: App for android to manage torrents</p>
<h2 id="426-jellyfin">42.6. JellyFin</h2>
<ul>
<li>
<p>drive ntfs -&gt; does not support inotify -&gt; scan manually: Settings -&gt; dashboard -&gt; scan all libraries</p>
</li>
<li>
<p>In order to change folder go to settings -&gt; Dashboard -&gt; Libraries</p>
</li>
<li>
<p>If informations are not correct, select movie or series and click identify</p>
</li>
<li>
<p>Do not watch jellyfin on browser. Instead, yay -S jellyfin-media-player</p>
</li>
<li>
<p>DNLA</p>
<ul>
<li>add to yml: &quot;network_mode: host&quot; on jellyfin container and remove ports section</li>
</ul>
</li>
</ul>
<h2 id="427-qbittorrent">42.7. QBitTorrent</h2>
<ul>
<li>In order to stop seeding go to tools -&gt; bittorrent -&gt; seeding limits -&gt; min ratio 0.01 -&gt; max seed time 1 minute (Pause torrent, remove doesnt work)</li>
</ul>
<h2 id="428-bazarr">42.8. Bazarr</h2>
<ul>
<li>Go to settings -&gt; Languages -&gt; Add New Profile -&gt; Add desired languages -&gt; Below this option, check the boxes Series and Movies and choose the profile just created in the step before</li>
</ul>
<h2 id="429-organizrr">42.9. Organizrr</h2>
<ul>
<li>In order for qbittorrent to work: Tools -&gt; WebUI -&gt; Untick &quot;Enable clickjacking protection&quot; and &quot;Enable Cross-Site Request Forgery protection&quot;</li>
</ul>
<h2 id="4210-nginx">42.10. NginX</h2>
<ul>
<li>
<p>Need to get nginx.conf and proxy.conf from swag github;</p>
</li>
<li>
<p>On the nginx.conf carefull with the following lines:</p>
<ul>
<li>include /config/nginx/worker_processes.conf;</li>
<li>include /config/nginx/resolver.conf;</li>
</ul>
</li>
<li>
<p>/config/nginx/resolver.conf:</p>
<ul>
<li><code>resolver  127.0.0.11 valid=30s;</code> (note that the &quot;;&quot; is important in these files</li>
</ul>
</li>
<li>
<p>The configs to reverse proxy can be found in github: linuxserver/reverse-proxy-confs (I want the subfolder ones)</p>
</li>
<li>
<p>In order to setup the sonarr, jackett, etc reverse-proxy config, I need to read the config because it asks to change the Base URL, etc</p>
</li>
<li>
<p>In order to setup grafana, needed to add to the docker-compose config:</p>
<ul>
<li>environment:
<ul>
<li>&quot;GF_SERVER_ROOT_URL=%(protocol)s://%(domain)s:%(http_port)s/grafana/&quot;</li>
</ul>
</li>
</ul>
</li>
<li>
<p>The above configs only have the &quot;location&quot; block which goes inside the server block. The default server config can be found in /config/nginx/site-confs/default. There, I should add &quot;include /config/nginx/proxy-confs/.*subfolder.conf;&quot; and comment both &quot;location&quot; blocks there.</p>
</li>
<li>
<p>The organizr config has as upstream_port port 80. In docker-compose.yml, organizr has host post 9983 mapped to port 80 on the container. However, nginx bypasses that and goes straight to port 80 on the container -&gt; that's why the reverse proxy config works.</p>
</li>
<li>
<p>It happened that, when I connected to organizr behind the nginx server, I could not login. This happened because the browser was rejecting cookies. The problem was in proxy.conf file. It assumed it was in https. Only need to comment the lines:</p>
<ul>
<li><code>proxy_set_header X-Forwarded-Proto https;</code></li>
<li><code>proxy_set_header X-Forwarded-Ssl on;</code></li>
</ul>
</li>
<li>
<p>Changed all port mapping in docker-compose.yml to 127.0.0.1:port so it can only be access from pi. Since everything is reverse proxied, it's fine</p>
</li>
<li>
<p>The nginx docker-compose config has in port section:</p>
<ul>
<li>80:80 which defaults to 0.0.0.0:80:80 (that's why I can access nginx from the entire network)</li>
</ul>
</li>
<li>
<p>In order to reverse-proxy emby I commented out the line &quot;network_mode: host&quot; otherwise the reverse-proxy config does not work by default. If I want to use &quot;network_mode: host&quot; I need change the reverse-proxy config: &quot;set $upstream_app emby&quot; -&gt; &quot;set $upstream_app 10.0.10.1&quot;. Inside emby, in Network, need to change &quot;Secure connection mode&quot; to &quot;Handled by reverse proxy&quot;. One thing I noticed was that UPnP was not working. In order for it to work, in emby, I need to add, in Network -&gt; Lan Networks: 192.168.0.0/24, 10.0.10.0/24</p>
</li>
<li>
<p>Couldn't find rclone serve dlna in laptop with firewalld. Use firewall gui, go to options -&gt; change zones of connections -&gt; select my network and put it as home. Then, select my network in connections, in zones tab  select home, then services, and tick upnp-client</p>
</li>
<li>
<p>In the media reverse proxy config, the lines: &quot;alias /media&quot; and &quot;facyindex on&quot; are the ones responsible to show the content of the folder /media of the container (folder where I wanna mount the stuff I wanna show). Note that I also need to &quot;git clone https://github.com/alehaa/nginx-fancyindex-flat-theme.git&quot; and</p>
<pre class="hljs"><code><div>sed -i '/&lt;small&gt;/,/&lt;\/small&gt;/d' &quot;$FANCYINDEX_THEME_PATH/layout/footer.html&quot;
sed -i &quot;s/File Browser/$(cat /etc/hostname) \| media/g&quot; -i &quot;$FANCYINDEX_THEME_PATH/layout/header.html&quot;
sed -i &quot;s/'Home'/''/g&quot; -i &quot;$FANCYINDEX_THEME_PATH/layout/js/breadcrumbs.js&quot;
</div></code></pre>
</li>
</ul>
<h2 id="4211-some-important-concepts">42.11. Some Important Concepts</h2>
<ul>
<li>
<p>Docker bypasses iptables</p>
</li>
<li>
<p>localhost de um container não é o mesmo que de outro (estao isolados)</p>
</li>
<li>
<p>Can't specify ports with network_mode host</p>
</li>
<li>
<p>In iptables.rules, the line:
<code>&quot;:FORWARD DROP [0:0]&quot;</code></p>
<p>blocks all forwarded packets</p>
</li>
<li>
<p>If I want to find the docker ip of a container: <code>docker network inspect -f '{{range .IPAM.Config}}{{.Subnet}}{{end}}' &lt;container_id&gt;</code></p>
</li>
<li>
<p>The <code>&lt;container_id&gt;</code> can be found by running <code>docker ps -a</code></p>
</li>
<li>
<p><code>docker inspect &lt;container_name&gt;</code></p>
</li>
<li>
<p><code>docker stop/logs/(rm -f)/restart &lt;container_name&gt;</code></p>
</li>
<li>
<p><code>docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' &lt;container_id&gt;</code></p>
</li>
<li>
<p><code>docker images -&gt; prints images of containers</code></p>
</li>
<li>
<p><code>docker image inspect &lt;image_id_from_above_step&gt;</code></p>
</li>
<li>
<p><code>docker manifest inspect --verbose &lt;container_name&gt;</code></p>
</li>
</ul>
<h2 id="4212-update-containers">42.12. Update Containers</h2>
<ul>
<li>
<p><code>docker-compose pull</code></p>
</li>
<li>
<p><code>docker-compose up</code></p>
</li>
<li>
<p>Container to update containers</p>
<pre class="hljs"><code><div>  watchtower:
    container_name: watchtower
    image: containrrr/watchtower:latest
    networks:
      - monitoring
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: &gt;-
      --cleanup --rolling-restart --schedule &quot;0 0 4 * * *&quot;
</div></code></pre>
</li>
</ul>
<p>Info: --cleanup doesn't leave older version on the computer.
--rolling-restart restarts the containers one by one (important to deal with dependencies)
The container pulls automatically</p>
<ul>
<li><code>docker system prune -a</code> (after doing docker-compose up, otherwise deletes images I just pulled)</li>
<li>list images: <code>docker images -a</code></li>
<li>remove all images: <code>docker rmi $(docker images -a -q)</code></li>
</ul>
<h2 id="4213-some-notes-based-on-experience">42.13. Some notes based on experience</h2>
<ul>
<li><code>docker run -it image_name sh</code> -&gt; runs an interactive shell container using the image &quot;image_name&quot;
The above command can be necessary because if the container is a one-shot, it will simply die after running: <code>docker run &lt;image_name&gt;</code>
However, I can also do <code>docker run -t -d &lt;image_name&gt; sh</code> and, even it's an one-shot, it will be kept alive. Then, I can always do a <code>docker exec -it &lt;container_id&gt; sh</code> to enter again inside the container</li>
<li>Other ways of starting a container: <code>sudo docker create &lt;image_name&gt;; sudo docker start &lt;container_id_from_previous_command&gt;</code></li>
<li><code>docker image history --no-trunc image_name &gt; image_history</code> -&gt; steps in the Dockerfile</li>
<li><code>docker ps -a</code> -&gt; lists containers and the container id</li>
<li>save the id in a variable: <code>container_id=$(docker create image_name)</code></li>
<li>Extracting a file from an image: <code>docker cp &quot;$container_id:$source_path&quot; &quot;$destination_path&quot;</code></li>
<li>Pushing a file to an image: <code>docker cp folder/. &quot;&lt;container_id&gt;:/path/in/container&quot;</code>  -&gt; this actually pushes all files inside folder</li>
<li><code>docker image inspect &lt;image&gt;</code></li>
<li><code>docker container prune</code> -&gt; removes all containers</li>
<li><code>git reset HEAD~1</code> -&gt; go back one commit before pushing</li>
<li>jenkins scm</li>
<li>https://www.infoq.com/articles/build-a-container-golang/</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="43-vpn">43. VPN</h1>
<h2 id="431-configuration">43.1. Configuration</h2>
<ul>
<li>
<p><code>pacman -S wireguard-tools</code> (wireguard-dkms, headers)</p>
</li>
<li>
<p>script wgg from rebelo:</p>
<ul>
<li><code>WG_PEERS</code>: names of  the devices I want connected to the VPN</li>
<li><code>NODE_URL</code> is the public ip</li>
<li><code>WG_NODE_ADDRESS</code> is the desktop's ip inside the VPN</li>
<li><code>WG_VPN_LAN</code> is the VPN network (which must match the IP chosen in the above line)</li>
<li>The <code>WG_NODE_INTERFACE</code> can be seen running: ip addr show</li>
<li>The script may be run again in order to add devices (the configurations before won't be altered)</li>
</ul>
</li>
<li>
<p>Open port on router:</p>
<ul>
<li>Go to games and apps, configuration, and remove all the ports there;</li>
<li>Protocol: UDP</li>
<li>Log and CONE unchecked (like everything else really)</li>
<li>Port: 57278</li>
</ul>
</li>
<li>
<p>In order to show a qrcode for the wireguard app on cell phone: qrencode -t ansiutf8 -r /etc/wireguard/peers/telemovel.conf</p>
</li>
<li>
<p>Give wireguard on cellphone root privileges</p>
</li>
<li>
<p>On phone's wireguard, tunnel name can be anything I want</p>
</li>
<li>
<p>To turn vpn on: <code>sudo wg-quick up wg1</code></p>
</li>
<li>
<p>Startup: <code>sudo systemctl enable wg-quick@wg1</code></p>
</li>
<li>
<p>To check hand shakes: <code>sudo wg show wg1 latest-handshakes</code></p>
</li>
<li>
<p>In order to fix the problem of the VPN not starting with systemctl service, a possible cause might be fail2ban. Then:</p>
<ul>
<li>vim <code>/usr/lib/systemd/system/fail2ban.service</code>
Append to &quot;After= :&quot; the following: wg-quick@wg1.service</li>
</ul>
</li>
<li>
<p>On laptop: <code>pacman -S wireguard-tools</code></p>
</li>
<li>
<p>Copy <code>/etc/wireguard/peers/laptop.conf</code> to <code>/etc/wireguard/wg0.conf</code></p>
</li>
<li>
<p><code>sudo wg-quick up wg0</code></p>
</li>
<li>
<p>ip r show show the routes</p>
</li>
</ul>
<h2 id="432-notes">43.2. Notes</h2>
<ul>
<li>Each computer needs an individual ip and key</li>
<li>For example, if I copy my laptop's file and put it in another computer, changing the ip, it won't
work if both connect since the key is the same</li>
<li>IPS have 32 bits</li>
<li>With A.B.C.D/X we mean that the X most significant digits are considered: 192.168.1.0/24 -&gt; 192.168.0.x with x between 0 to 255</li>
<li>192.168.0.0/16 -&gt; 192.168.0.0 to 192.168.255.255</li>
</ul>
<h2 id="433-viseu">43.3. Viseu</h2>
<ul>
<li>na config do desktop do porto, tens lá uma entrada para cada peer</li>
<li>no peer de viseu, para alem de 10.0.10.4/32, adicionavas 192.168.20.0/24</li>
<li>e nos peer/*.conf também</li>
<li>ou seja, de qualquer lado, o teu telemóvel sabia que, para chegar à rede 192.168.20.0/24, tem que enviar pacotes para o desktop do porto</li>
<li>e o desktop do porto sabe que, para chegar a essa mesma rede, tem que enviar pacotes para o peer de viseu</li>
<li>tinhas que adicionar a 192.168.20.0/24 no peer de viseu em wg1 no desktop do porto</li>
<li>e nos peers tinha de adicionar  192.168.20.0/24 para cada um dos peers saber que, pelo desktop do porto, consegue chegar a viseu</li>
</ul>
<h2 id="434-check-ports">43.4. Check Ports</h2>
<ul>
<li>sudo nmap -sU -p- ip (UDP)</li>
<li>sudo nmap -sT -p- ip (TCP)</li>
</ul>
<h2 id="435-fix-connection-problem">43.5. Fix connection problem</h2>
<ul>
<li>On laptop:
<ul>
<li>ip route add 192.168.1.64/32 via 192.168.1.254 dev (interface, ex: wlp0s20f3)</li>
<li>nmcli connection show</li>
<li>nmcli connection modify CONNECTION_NAME (ex: ROBOREDO) +ipv4.routes &quot;192.168.1.0/24 192.168.1.254&quot;</li>
</ul>
</li>
<li>Apparently, this fix isn't permanent</li>
</ul>
<h2 id="436-connect-to-rebelo">43.6. Connect to Rebelo</h2>
<ul>
<li>
<p>Add wg2.conf in /etc/wireguard (note: can have both vpns up)</p>
</li>
<li>
<p>Alternatively, I can add the <code>[Peer]</code> section to wg1 and, then, I don't need wg2 and this works best.</p>
</li>
<li>
<p>Some notes if I didn't include the <code>[Peer]</code> section inside wg1:</p>
<ul>
<li>When I added the AllowedIPs on phone, I couldn't connect to Rebelo-pi. This happened because the reply from Rebelo wasn't being forwarded to phone. I would need to add something like: <code>iptables -A FORWARD -i wg2 -o wg1 -j ACCEPT</code> in wg1 config.</li>
<li><code>sudo iptables -A FORWARD -j ACCEPT</code> also makes it work (this allows all trafic)</li>
<li><code>sudo iptables -D FORWARD -j ACCEPT</code> reverts the above command</li>
</ul>
</li>
<li>
<p>Add 10.0.1.0/24 in AllowedIPs of peers</p>
</li>
<li>
<p><code>wg show wg1 latest-handshakes</code> -&gt; to check if connection is successful</p>
</li>
<li>
<p><code>echo &quot;your_private_key&quot; | wg pubkey</code> -&gt; generates public key using private key</p>
</li>
<li>
<p>This connection only works when connected to vpn, even if I'm on my LAN!!!</p>
</li>
<li>
<p><code>tcpdump -i any icmp</code> (icmp are the type of packages, the ones used by ping command. This command listens to packages being sent through
my computer)</p>
</li>
</ul>
<h2 id="437-udp2raw">43.7. UDP2RAW</h2>
<ul>
<li>
<p><code>pacman -S udp2raw-tunnel</code></p>
</li>
<li>
<p>Open tcp port on router for udp2raw (e.g: 58374)</p>
</li>
<li>
<p>I can still have a direct port for wireguard (e.g. 57278). This is also the ListenPort in wg1.conf</p>
</li>
<li>
<p>On server, run: <code>udp2raw -s -l &quot;0.0.0.0:58374&quot; -r &quot;127.0.0.1:57278&quot; -k &quot;tgbyhnrfv&quot; --raw-mode faketcp -a</code> :</p>
<ul>
<li>&quot;0.0.0.0:58374&quot; -&gt; this means traffic can come from anywhere (0.0.0.0) and udp2raw listens on port 58374, which I specifically openned in router</li>
<li>&quot;127.0.0.1:57278&quot; -&gt; this means that traffic coming from port 58374 is going to be sent to port 57278, which is wireguard's port</li>
<li>Example udp2raw.service:</li>
</ul>
<pre class="hljs"><code><div>[Unit]
Description=udp2raw-tunnel client service
ConditionFileIsExecutable=/usr/bin/udp2raw
After=network-online.target

[Service]
Type=simple
RemainAfterExit=yes
ExecStart=/usr/bin/udp2raw -s -l &quot;0.0.0.0:58374&quot; -r &quot;127.0.0.1:57278&quot; -k &quot;tgbyhnrfv&quot; --raw-mode faketcp -a
Restart=on-failure

[Install]
WantedBy=multi-user.target
</div></code></pre>
</li>
<li>
<p>On client: <code>sudo udp2raw -c -l &quot;127.0.0.1:5634&quot; -r &quot;$(ssh goncalo@jgroboredo.ddns.net 'curl -s ifconfig.me'):58374&quot; -k &quot;tgbyhnrfv&quot; --raw-mode faketcp -a</code></p>
<ul>
<li>&quot;127.0.0.1:5634&quot; -&gt; local traffic to port 5634</li>
<li>&quot;$(ssh goncalo@jgroboredo.ddns.net 'curl -s ifconfig.me'):58374&quot; -&gt; target is my ipv4 ip and the port where upd2raw is listening on server, meaning in this case 58374</li>
</ul>
</li>
<li>
<p>The only thing left is to change wireguard config in the client:</p>
<ul>
<li>For this, simply create a new config;</li>
<li>Add in the <code>[Interface]</code> group the line: &quot;MTU = 1300&quot; (udp2raw doesn't support large packages)</li>
<li>Change endpoint to: &quot;127.0.0.1:5634&quot;</li>
</ul>
</li>
</ul>
<h2 id="438-updated-vpn">43.8. Updated VPN</h2>
<ul>
<li>In iptables, drop all connections except the ones I want to keep;</li>
<li>These connections are only concerned with the direct access to the raspberry and not the traffic thourgh vpn;</li>
<li>If I want to have a peer with full access to vpn and another with restricted access (this access refers to forwarding traffic through vpn),
and I want to be able to access the restricted access peer, I need to include in the iptables.rules the following lines:
<ul>
<li>
<p><code>-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT</code>
Basically, the idea is that, the restricted access peer needs to send packets saying the connection is established, for example. Therefore, these packets need to be forward by the vpn... However, this peer isn't allowed to do that by default. However, this rule allows for RELATED packets to be forwarded. The similar rule existent in the wg config isn't enough probably because the packets don't go through eth0. The rule</p>
</li>
<li>
<p><code>-A FORWARD -p icmp --icmp-type echo-request -j ACCEPT</code> allows for pings.</p>
</li>
<li>
<p>Lastly, on iptables.rules, I need to specifically allow access to each port I want to access, EVEN if I'm already connected to the vpn. The idea seems to be that
I have access to the VPN through the VPN port, but this doesn't give me access to the other ports.</p>
</li>
<li>
<p>A container that hasn't network_mode host can't now connect to one that is on the network_mode host. To solve this, allow input from docker interface:</p>
<ul>
<li><code>-A INPUT -i br+ -p TCP --dport 32400 -j ACCEPT</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="439-fixing-routes">43.9. Fixing routes</h2>
<ul>
<li>When laptop is not connected to VPN but desktop is (both in porto), I could not ping desktop from laptop using the local ip, since the wireguard
priority was lower and the response of the desktop went through the vpn (and laptop was not connected)</li>
<li>changing priorities correctly:
<ul>
<li><code>sudo ifmetric wlp0s20f3 0</code></li>
<li><code>sudo ip route del default</code></li>
<li><code>sudo ip route add default via 192.168.200.254 dev wlp0s20f3 proto dhcp src 192.168.200.67 metric 600</code></li>
<li><code>sudo ifmetric wg0 1</code></li>
</ul>
</li>
</ul>
<p>NOTE:  <a href="https://hub.docker.com/r/linuxserver/swag">Nginx Server</a></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="44-ddns">44. DDNS</h1>
<p>ON ROUTER:</p>
<ul>
<li>Go to dynamic ddns;</li>
<li>Configure -&gt; Activate -&gt; Username: email of no-ip account -&gt; Password: pw of no-ip account;
Service: No-IP -&gt; Host: hostname chosen in no-ip account (--.ddns.net)</li>
<li>Do not forget to change router's account pw to something different from default (currently, it is my usual pw)</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="45-encrypt-dir">45. Encrypt dir</h1>
<ul>
<li>tar -cvzf - folder | gpg -c &gt; folder.tar.gz.gpg
<ul>
<li>gpg -d folder.tar.gz.gpg | tar -xvzf -</li>
</ul>
</li>
</ul>
<h2 id="451-disable-password-cache">45.1. Disable password cache</h2>
<ul>
<li>
<p>Edit <code>~/.gnupg/gpg-agent.conf</code></p>
<pre class="hljs"><code><div>  default-cache-ttl 1
  max-cache-ttl 1
</div></code></pre>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="46-violent-monkey">46. Violent Monkey</h1>
<ul>
<li>
<p>https://addons.mozilla.org/en-US/firefox/addon/violentmonkey/</p>
</li>
<li>
<p>https://github.com/Purfview/IMDb-Scout-Mod</p>
<ul>
<li>Go to script in github, raw -&gt; ViolentMonkey will prompt to install</li>
<li>Go to imdb page of some movie/show, violentmonkey IMDB scout mod settings, search for sonnar and radarr and set it up (the root folder is the folder inside radarr and sonarr where I keep movies/tvshows).</li>
<li>Don't forget to enable them at the very end of the file</li>
</ul>
</li>
<li>
<p>https://greasyfork.org/en/scripts/789-select-text-inside-a-link-like-opera</p>
</li>
<li>
<p>https://greasyfork.org/en/scripts/1810-google-tracking-b-gone</p>
</li>
<li>
<p>Tampermonkey allows method GM_cookie</p>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="47-wireshark">47. Wireshark</h1>
<ul>
<li>Dissectors: .local/lib/wireshark/plugins</li>
<li>For rfcomm dlci: file -&gt; export -&gt; export as json</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="48-telegram">48. Telegram</h1>
<h2 id="481-botfather">48.1. BotFather</h2>
<pre class="hljs"><code><div>/newbot
BotName
botusername_bot
/setuserpic
@botusername_bot (note: this doesn't work without the &quot;@&quot;)
</div></code></pre>
<h2 id="482-find-bot-chat-id">48.2. Find bot chat ID</h2>
<ul>
<li>On telegram, search by: @botusername_bot</li>
<li><code>https://api.telegram.org/bot&lt;bot_token_here&gt;/getUpdates</code></li>
<li>Send message to bot in telegram and update this page</li>
<li>Another option is to add @RawDataBot to my group (do not forget to kick it after)</li>
</ul>
<h2 id="483-add-sonarr-and-radarr-to-telegram">48.3. Add sonarr and radarr to telegram</h2>
<ul>
<li>Go to settings -&gt; Connect -&gt; Telegram</li>
<li>In name, just put Telegram</li>
<li>Add bot token and chat id</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="49-barrier">49. Barrier</h1>
<p>Connect first with barrier only after do this:</p>
<ul>
<li>Edit <code>sudo vim /etc/systemd/system/barrier.service</code></li>
</ul>
<pre class="hljs"><code><div>[Unit]
Description=Barrier Client mouse/keyboard share
Requires=display-manager.service
After=display-manager.service
StartLimitIntervalSec=0

[Service]
Type=forking
ExecStart=/usr/bin/barrierc --no-restart --name raspberrypi (name I want for the client to be known) --enable-crypto 192.168.0.109 (ip of server)
Restart=always
RestartSec=10
User=pi

[Install]
WantedBy=multi-user.target
</div></code></pre>
<p>And do:</p>
<pre class="hljs"><code><div>sudo systemctl daemon-reload
systemctl start barrier.service
systemctl status barrier.service
systemctl <span class="hljs-built_in">enable</span> barrier.service
</div></code></pre>
<p>so that the service doesn't run when I go to openbox, since I want to play cs, add to /etc/sudoers : <code>goncalo ALL = NOPASSWD: /bin/systemctl stop barrier.service</code>
and add <code>sudo systemctl stop barrier.service</code> to autostart</p>
<p>Barrier does not work on wayland</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="50-teamviewer">50. TeamViewer</h1>
<p>Start teamviewer service: <code>systemctl start teamviewerd.service</code></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="51-flatpak">51. Flatpak</h1>
<pre class="hljs"><code><div>pacman -S flatpak
flatpak install flathub com.usebottles.bottles
flatpak run com.usebottles.bottles

sudo ln -s /var/lib/flatpak/exports/bin/chat.rocket.RocketChat /usr/bin/rocket-chat
cp /var/lib/flatpak/app/media.emby.EmbyTheater/current/active/files/share/applications/media.emby.EmbyTheater.desktop  /usr/share/applications/
</div></code></pre>
<h2 id="511-firefox">51.1. Firefox</h2>
<pre class="hljs"><code><div>flatpak install flathub org.mozilla.firefox
flatpak list to list apps
flatpak update &lt;Application-ID&gt; <span class="hljs-comment">#(app-ID found in previous step)</span>
<span class="hljs-comment"># Added systemd service to update automatically flatpak apps (from arch wiki flatpak)</span>
systemd-analyze --system unit-paths
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="52-vm">52. VM</h1>
<h2 id="521-fix-resolution">52.1. Fix Resolution</h2>
<ul>
<li>go to /etc/default/grub</li>
<li>GRUB_GFXMODE=1024x768x32</li>
<li>GRUB_GFXPAYLOAD_LINUX=keep</li>
<li>grub-mkconfig -o /boot/grub/grub.cfg</li>
</ul>
<h2 id="522-sdcard-on-vm">52.2. SDcard on VM</h2>
<ul>
<li>check with <code>fdisk -l</code> where is the sdcard (/dev/mmcblk0)</li>
<li>unmount if mounted</li>
<li><code>VBoxManage internalcommands createrawvmdk -filename /path/to/file.vmdk -rawdisk /dev/mmcblk0</code></li>
<li>Go to the storage settings of the VM, add hard disk and select the .vmdk file created above</li>
<li><code>sudo usermod -a -G vboxusers goncalo</code></li>
<li><code>sudo usermod -a -G disk goncalo</code></li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="53-latex">53. Latex</h1>
<pre class="hljs"><code><div>/usr/share/texmf-dist/tex/latex/local
which mktexlsr
sudo path/to/mktexlsr or sudo $(which mktexlsr)---&gt; update latex
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="54-plex">54. Plex</h1>
<pre class="hljs"><code><div>docker stop plex
sqlite3 &quot;config_docker/plex/Library/Application Support/Plex Media Server/Plug-in Support/Databases/com.plexapp.plugins.library.db&quot;
PRAGMA default_cache_size = 20000; (com o ponto e virgula)
ctrl-D
docker start plex
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="55-format-phone">55. Format phone</h1>
<h2 id="551-formatting">55.1. Formatting</h2>
<ul>
<li><code>pacman -S android-tools</code></li>
<li><code>adb shell - cd /data/adb/modules/quick* - find . -name &quot;*.apk&quot;</code></li>
<li>backup -&gt; boot, system image, data</li>
<li><code>adb pull /sdcard/Fox</code> -&gt; copy of the backup to pc</li>
<li><code>adb push zipname.zip /sdcard</code>  (no need to wipe to do this)</li>
<li><code>adb reboot bootloader</code></li>
<li>important partitions to wipe -&gt; system, cache, data</li>
<li>to flash recovery: <code>sudo fastboot flash recovery ficheiro-do-recovery.img</code></li>
<li><code>pacman -S android-udev</code> (fastboot has no permissions)</li>
<li><code>treble check</code></li>
<li><code>fastboot getvar all | grep “slot”</code></li>
<li>If there's any problem, I can always flash xiaomi rom (bookmarks)</li>
<li>with command: <code>bash flash_all.sh</code> (only need to connect phone in fastboot mode)</li>
<li>flash gapps after flahsing rom</li>
<li>update firmware before new rom! Flashing the same way as the others</li>
<li>Maybe need to really format data partition</li>
<li>To update recovery, I can do it inside recover, flashing the zip</li>
<li>To install, for example, Orange Fox, from TWRP, I can simply flash it from TWRP</li>
<li>Installing lavender with gapps did not work... Need MindTheGapps</li>
</ul>
<h2 id="552-connecting-to-pc">55.2. Connecting to PC</h2>
<ul>
<li>
<p>Primeiro instalar termux</p>
<ul>
<li>install fdroid and install termux from  there</li>
</ul>
</li>
<li>
<p><code>pkg upgrade</code></p>
</li>
<li>
<p><code>pkg install openssh</code></p>
</li>
<li>
<p><code>touch ~/.ssh/authorized_keys</code></p>
</li>
<li>
<p><code>chmod 600 ~/.ssh/authorized_keys</code></p>
</li>
<li>
<p><code>chmod 700 ~/.ssh</code></p>
</li>
<li>
<p>copy key from pc to phone</p>
</li>
<li>
<p><code>cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</code></p>
</li>
<li>
<p><code>chmod 600 ~/.ssh/authorized_keys</code></p>
</li>
<li>
<p>run ssh: sshd</p>
</li>
<li>
<p>kill ssh: pkill sshd</p>
</li>
<li>
<p><code>apt update &amp;&amp; apt upgrade</code></p>
</li>
<li>
<p>port: 8022</p>
</li>
<li>
<p>termux-setup-storage: (creates folder ~/storage)
-shared: phone internal memory directory
-external: sdcard (on sdcard: android-data-com.termux: Symlink external-1 points to a private Termux directory on external sdcard, i.e. /storage/XXXX-XXXX/Android/data/com.termux/files)</p>
</li>
<li>
<p>pkg install tsu - using magisk this will give termux super user sudo</p>
</li>
<li>
<p>After installing tsu, I can sudo chown /storage/XXXX-XXXX to be able to write on sdcard directly</p>
</li>
<li>
<p>install jupyter-notebook:</p>
<ul>
<li><code>apt install clang python fftw libzmq freetype libpng pkg-config libcrypt</code></li>
<li><code>LDFLAGS=&quot;-lm -lcompiler_rt&quot; pip install jupyter</code></li>
<li><code>pip install numpy</code> (ou pkg)</li>
<li><code>pip install matplotlib</code></li>
<li>run: <code>jupyter notebook</code></li>
</ul>
</li>
<li>
<p>install termux-sudo-master : file in phone format folder (after installing tsu, dont
need this):</p>
<pre class="hljs"><code><div>pkg install ncurses-utils
change to extraction directory of termux-sudo-master
cat sudo &gt; /data/data/com.termux/files/usr/bin/sudo
chmod 700 /data/data/com.termux/files/usr/bin/sudo
sudo su [-] -&gt; gets me to root shell
sudo &lt;comand&gt;
</div></code></pre>
</li>
</ul>
<h2 id="553-arch-linux-in-termux">55.3. ARCH LINUX IN TERMUX</h2>
<pre class="hljs"><code><div>pkg update
pkg install curl bsdtar
curl -OL https://raw.githubusercontent.com/TermuxArch/TermuxArch/master/setupTermuxArch.bash
bash setupTermuxArch.bash
<span class="hljs-built_in">exit</span>
pkg install vim
touch .bashrc
~/arch/startarch <span class="hljs-comment"># at the bash prompt</span>
pacman -Syyu sudo wget curl
sudo chown root:root /etc/resolv.conf
sudo chmod 644 /etc/resolv.conf
sudo passwd root
addauser &lt;user&gt;
<span class="hljs-built_in">exit</span>
sudo passwd &lt;user&gt;
visudo
<span class="hljs-comment"># And add your user's privileges under root's in the "User privilege specification" section: </span>
&lt;user&gt; ALL=(ALL) ALL
su - &lt;user&gt;
wget --no-check-certificate <span class="hljs-string">'https://docs.google.com/uc?export=download&amp;id=107Fh0l_p0ItVkUufOhP9to-OU_6KYhPW'</span> -O fresharch.sh &amp;&amp; chmod +x fresharch.sh &amp;&amp; sudo bash fresharch.sh
add su - &lt;user&gt; to bash
<span class="hljs-comment"># If you need to access shared storage, then cd into /storage/emulated/0</span>
<span class="hljs-comment"># create symlinks (ln -s) for storage</span>
</div></code></pre>
<h2 id="554-process-to-format">55.4. Process to format</h2>
<ul>
<li>Boot to recovery</li>
<li>Format system, data, cachr</li>
<li>Reboot to recovery to reload partition table</li>
<li>Install rom, format data, reboot to rom</li>
</ul>
<h2 id="555-apps-adb">55.5. Apps ADB</h2>
<pre class="hljs"><code><div>adb shell pm list packages
adb shell pm uninstall -k --user 0 NameOfPackage <span class="hljs-comment">#(get name from app info, advanced)</span>
adb uninstall com.example.myapp
adb shell content query --uri content://com.android.contacts/contacts
adb shell content delete --uri content://com.android.contacts/contacts/437413
adb shell content query --uri content://contacts/phones/  --projection display_name:number:notes
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="56-find-command">56. Find Command</h1>
<h2 id="561-error-with-mv-command">56.1. Error with mv command</h2>
<p>By running the following command:</p>
<p><code>find . -type f -name '*2019*' -exec mv {} ./backup_2019 \;</code></p>
<p>I obtain the following errors:</p>
<pre class="hljs"><code><div>mv: ‘./backup_2019/2019-A.txt’ and ‘backup_2019/2019-A.txt’ are the same file
mv: ‘./backup_2019/2019-B.txt’ and ‘backup_2019/2019-B.txt’ are the same file
mv: ‘./backup_2019/2019-C.txt’ and ‘backup_2019/2019-C.txt’ are the same file
</div></code></pre>
<p>This happens because I am not ignoring the target directory to where I am moving the file.</p>
<p>The command:</p>
<p><code>find . -path './backup_2019' -prune -o -type f -name '*2019*' -exec mv {} ./backup_2019 \;</code></p>
<p>More ways of pruning:</p>
<p><code>find . -maxdepth 1 \( -path &quot;./Linux&quot; \) -prune -o -type d -print</code></p>
<p><code>find . -mindepth 1 -maxdepth 1 \( -path &quot;Some/Path&quot; -o -path &quot;./Linux&quot; \) -prune -o -type d -print</code></p>
<p>solves this issue.</p>
<p>Using the option <code>-maxdepth 1</code> should also solve the issue.</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="57-conky-desktop">57. Conky Desktop</h1>
<p><code>/usr/share/conky conky_maia</code> is the file I want. I have it saved in Linux backup.</p>
<h2 id="571-install-conky-manager">57.1. Install conky-manager</h2>
<p>Change in config:</p>
<pre class="hljs"><code><div>own_window yes
own_window_class Conky
own_window_type override
background yes
</div></code></pre>
<ul>
<li>To use the conky-manager, comment on config the line with: <code>exec --no-startup-id start_conky_maia</code></li>
<li>check for driver: lspci -k</li>
<li>ifconfig: install net-tools : this allows to see the name of the device in use (eg. wlan0)</li>
<li>add the files in conky-startup.sh like: <code>conky -c /path/to/file</code></li>
<li>add conky-startup to config</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="58-endeavouros-stuff">58. EndeavourOS Stuff</h1>
<ul>
<li>
<p>Might need to connect to network:</p>
<pre class="hljs"><code><div>nmcli d -&gt; to determine the name of the wifi interface
nmcli r wifi on
nmcli d wifi list
nmcli d wifi connect my_wifi password &lt;password&gt;
</div></code></pre>
</li>
<li>
<p>Check wlan interface: <code>iw dev</code></p>
</li>
<li>
<p>Script photo nationalgeographic: <code>pacman -S python-pillow</code></p>
</li>
<li>
<p>Put touchpad file in <code>/etc/X11/xorg.conf.d</code> with:</p>
<pre class="hljs"><code><div>NaturalScrolling off
AccelProfile -1
</div></code></pre>
</li>
<li>
<p>Nao consigo obter em lyx o output por causa de ficheiros eps: <code>pacman -S ghostscript</code></p>
</li>
<li>
<p>Ao instalar o Mathematica, o script não gostou que o path tivesse um espaco</p>
</li>
</ul>
<h2 id="581-relativamente-ao-barrier">58.1. Relativamente ao barrier</h2>
<ul>
<li>
<p>O nome dos dois pcs nao pode ser o mesmo;</p>
</li>
<li>
<p>No ficheiro <code>/etc/systemd/system/barrier.service</code> tenho de ter:</p>
<pre class="hljs"><code><div>[Unit]
Description=Barrier Client mouse/keyboard share
Requires=display-manager.service
After=display-manager.service
StartLimitIntervalSec=0

[Service]
Type=forking
ExecStart=/usr/bin/barrierc --no-restart --name raspberrypi --enable-crypto 192.168.0.109
Restart=always
RestartSec=10
User=pi

[Install]		
WantedBy=multi-user.target
</div></code></pre>
<p>O important é em <code>--name</code> ter o nome do pc que eu pus no servidor (exemplo: no servidor, disse que o monitor se chamava goncalo-desktop... Entao, este é o nome que tenho de usar)</p>
</li>
</ul>
<p>Note: Adicionar à config do i3 workspace_auto_back_and_forth yes</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="59-map-keyboard-keys">59. Map Keyboard Keys</h1>
<ul>
<li>
<p>Search for keycode:</p>
<ul>
<li><code>xmodmap -pk</code></li>
</ul>
</li>
<li>
<p>Go to i3 config, add command: <code>exec_always --no-startup-id xmodmap -e &quot;keycode 106 = backslash&quot;</code></p>
</li>
<li>
<p>Note:</p>
<ul>
<li>In the command above, keycode 106 is the key to be altered; backslash is the name of the the name of the key (In this example, it is backslash) and the keycode of the key I want to replace (which also has a name associated with it, in this case it was <code>KP_Divide</code>)</li>
</ul>
</li>
<li>
<p>Example:</p>
<ul>
<li><code>xmodmap -e &quot;keycode 38 = a A aacute Aacute ae AE ae&quot;</code></li>
<li>Then:</li>
</ul>
<ol>
<li>a: normal a</li>
<li>A: shift + a</li>
<li>á: altgr + a</li>
<li>Á: shift + altgr + a</li>
</ol>
</li>
</ul>
<p>Using the example above, I can do: <code>exec_always --no-startup-id xmodmap -e &quot;keycode 106 = backslash bar&quot;</code></p>
<p>This will include the | in the key when doing shift+key</p>
<p>On my keyboard, ç -&gt; alt + ,</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="60-format-pen">60. Format Pen</h1>
<h2 id="601-apagar-parti%C3%A7%C3%B5es">60.1. Apagar partições</h2>
<pre class="hljs"><code><div>sudo fdisk -l -&gt; para ver qual é a pen
sudo gdisk /dev/sdX -&gt; em que X é o que encontro em cima
  o, enter
  n, enter, enter, enter
  0700
  w
</div></code></pre>
<h2 id="602-criar-parti%C3%A7%C3%A3o">60.2. Criar Partição</h2>
<pre class="hljs"><code><div>sudo mkfs.vfat /dev/sdX1
sudo mkfs.exfat <span class="hljs-comment"># (for SD CARD)</span>
</div></code></pre>
<h2 id="603-format-pen-with-iso">60.3. Format pen with ISO</h2>
<pre class="hljs"><code><div>sudo fdisk --list
dd if=manjaro.iso of=/dev/sd# status=progress
sync
</div></code></pre>
<p>If I want to install windows, use woeusb: <code>sudo woeusb --target-filesystem NTFS --device Win10_20H2_v2_French_x64.iso /dev/sdb</code></p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="61-borg-backup">61. Borg Backup</h1>
<h2 id="611-setup-steps">61.1. Setup Steps</h2>
<ol>
<li>Create backup user in pi (do not add user no any groups):</li>
</ol>
<pre class="hljs"><code><div>sudo useradd -m &lt;username&gt;
passwd &lt;username&gt;
ssh-keygent -t ed25519
touch ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
</div></code></pre>
<ol start="2">
<li>Prepare repo directory:</li>
</ol>
<pre class="hljs"><code><div>btrfs subvolume create /home/goncalo/HDD/@backups (btrfs subvolume create /path/to/mount/point)
Add entry to fstab to mount this subvolume
mkdir /mnt/backups/repo/name
sudo chown &lt;backup-user&gt;:&lt;backup-user&gt; /mnt/backups/repo/name
sudo chmod 770 /mnt/backups/repo/name
</div></code></pre>
<ol start="3">
<li>Init borg backup</li>
</ol>
<p><code>borg init --encryption=keyfile ssh://backup-user@pi/mnt/backups/repo/name</code></p>
<ol start="4">
<li>Borg mount (needs <code>pacman -S python-llfuse</code>)</li>
</ol>
<p><code>borg mount path/to/repo::backup/name /mount/point</code></p>
<h2 id="612-mount-backup-automatically">61.2. MOUNT BACKUP AUTOMATICALLY</h2>
<ul>
<li>
<p>Do it with systemd mount: needs a mount and .automount unit; This allows to export environment variables in the mount process;</p>
</li>
<li>
<p>I'm mounting the backup repo using fstab (I mount it directly because I need the backup user) and then I use that to mount the borg backup through systemd mount; Eventually, this could be avoided if I used umask in borg (in umask the permissions subtract - 0077 results in 700; I probably want 0007)</p>
</li>
<li>
<p>The systemd units to mount need to have the path where it is going to be mounted in the name. Example:
. Path where to mount: /mnt/borg_backup/backup_files -&gt; Systemd unit name: mnt-borg_backup-backup_files.{mount,automount}</p>
</li>
<li>
<p>The entry in fstab doesn't use the env variables specified in the systemd mount unit</p>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="62-hdd-format">62. HDD Format</h1>
<p><code>sudo fdisk -l</code></p>
<h2 id="621-delete-partitions">62.1. Delete Partitions</h2>
<p><code>sudo gdisk /dev/sdX</code> (where X is found from the previous step) and then select <code>d</code> and <code>w</code></p>
<h2 id="622-create-new-gpt-partition-table">62.2. Create New GPT partition table</h2>
<pre class="hljs"><code><div>sudo gdisk /dev/sdX
  - n
  - enter
  - enter
  - enter
  - w
</div></code></pre>
<h2 id="623-format-disk">62.3. Format Disk</h2>
<p><code>sudo mkfs.btrs -f /dev/sdX1</code></p>
<h2 id="624-find-uuid-and-check-type">62.4. Find UUID and check type</h2>
<p><code>sudo blkid</code></p>
<h2 id="625-fstab">62.5. Fstab</h2>
<pre class="hljs"><code><div>UUID=d1e18a1a-1c64-458e-9aa3-e59cd9b8bd51       /home/goncalo/HDD2            btrfs   defaults,nofail,noatime   0       0
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="63-ubuntu">63. Ubuntu</h1>
<h2 id="631-fix-ethernet-unavailable">63.1. Fix ethernet unavailable</h2>
<pre class="hljs"><code><div>[ifupdown]
managed=true
</div></code></pre>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="64-problem-unknown-fs-type-vfat">64. PROBLEM: Unknown fs type vfat</h1>
<p>Issue: Booted and got an error while mounting /efi during boot: /efi, unknown file system type vfat
What is happening: booting a different kernel from what is on /</p>
<p>Unpack unified kernel image to check kernel version:</p>
<ul>
<li><code>objcopy -O binary --only-section=.linux linux.efi unpacked-vmlinuz</code></li>
<li><code>file unpacked-vmlinuz</code></li>
</ul>
<p>Check current version: <code>ls /usr/lib/modules</code></p>
<p><code>sbctl list-bundles</code></p>
<p>Generate new unified kernel image:</p>
<pre class="hljs"><code><div>sbctl bundle -s -i /boot/intel-ucode.img \
-l /usr/share/systemd/bootctl/splash-arch.bmp \
-k /boot/vmlinuz-linux \
-f /boot/initramfs-linux.img \
/efi/EFI/Linux/linux.efi
</div></code></pre>
<p>Edit <code>/etc/mkinitcpio.d/linux.preset</code>:</p>
<pre class="hljs"><code><div>ALL_config=&quot;/etc/mkinitcpio.conf&quot;
ALL_kver=&quot;/boot/vmlinuz-linux&quot;

PRESETS=('efi')

# BIOS
bios_image=&quot;/boot/initramfs-linux.img&quot;

# EFI
efi_image=&quot;/boot/initramfs-linux.img&quot;
#efi_options=&quot;--splash /usr/share/systemd/bootctl/splash-arch.bmp&quot;
efi_microcode=(/boot/*-ucode.img)
efi_efi_image=&quot;/efi/EFI/Linux/linux.efi&quot;
</div></code></pre>
<h2 id="641-some-notes">64.1. Some notes</h2>
<ul>
<li>initramfs is the / before the actual / is mounted (it is mounted in ram) and provides basic utillities + systemd. It also includes some base kernel modules -&gt; need to rebuild initramfs after kernel update</li>
<li>systemd-bootx64.efi is just the bootloader</li>
<li>efibootmgr writes on the motherboard directly</li>
<li>linux.efi is an unified kernel image - contains kernel, initramfs, kernel arguments, ucode</li>
<li>mkinitcpio gera o initramfs e depois produz o linux.efi</li>
<li>vmlinuz-linux is the actual kernel</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="65-permissions">65. Permissions</h1>
<h2 id="651-fix-permissions">65.1. Fix permissions</h2>
<ul>
<li><code>sudo pacman-fix-permissions</code></li>
<li>check ssh to fix key permissions</li>
<li><code>stat -c &quot;%a %n&quot; /etc/ssh/*</code> -&gt; outputs permissions in numbers</li>
</ul>
<p>I have made a script with a file which has the correct permissions which I got from alex pc</p>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="66-raspberry-pi">66. Raspberry Pi</h1>
<ul>
<li>
<p>Needed to systemctl enable sshd inside chroot (chroot root/@)</p>
</li>
<li>
<p>p10k configure to configure p10k theme for zsh</p>
</li>
<li>
<p>For username in zsh prompt: uncomment context line in .p10k file in POWERLEVEL9K_LEFT_PROMPT_ELEMENTS</p>
</li>
<li>
<p>In order for the systemctl --user to work, need to set UsePAM yes in /etc/ssh/sshd_config</p>
</li>
<li>
<p>In rebelo script change:</p>
<ul>
<li>rebelo-pi to goncalo-pi</li>
<li>change also the Disk to avoid potential problems</li>
</ul>
</li>
<li>
<p>file <code>/etc/iptables/iptables.rules</code>:</p>
<pre class="hljs"><code><div>  *filter
  :INPUT ACCEPT [0:0]
  :FORWARD ACCEPT [0:0]
  :OUTPUT ACCEPT [0:0]
  COMMIT
</div></code></pre>
</li>
<li>
<p>before finishing formating I need to:</p>
<ul>
<li>change iptables.rules</li>
<li>change sshd_config (port and pw authentication)</li>
<li>enable sshd service</li>
</ul>
</li>
<li>
<p>on sdcard, aarch64 did not work. Need to change config/config.sh:</p>
<ul>
<li>ARCH_CPU_BRAND=armv7h</li>
<li>ARCH-KERNEL=linux-rpi</li>
</ul>
</li>
<li>
<p>In order to be able to build the packages to arm architecture from arch x86_64 need to install:</p>
<ul>
<li>qemu-user-static-bin</li>
<li>Other dependencies:
<ul>
<li>arch-install-scripts</li>
<li>uboot-tools</li>
<li>aria2</li>
<li>iwd</li>
<li>gnu-netcat (for nc)</li>
<li>arp-scan</li>
<li>exfatprogs (for mkfs.exfat)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Edit <code>/boot/config.txt</code> for overclock</p>
<pre class="hljs"><code><div>  enable_uart=1 (this screws up the OC)
  over_voltage=6
  arm_freq=2000
</div></code></pre>
</li>
<li>
<p>In order for the ssh-agent to work, add to /etc/ssh/sshd_config:</p>
<ul>
<li>UsePAM yes</li>
</ul>
</li>
</ul>
<p>Don't forget systemctl --user cannot be ran with sudo</p>
<p>For docker to work, don't forget to change the UID in everyfile.
The error:</p>
<p><code>Failed to load config file &quot;/run/secrets/rclone_conf&quot;: open /run/secrets/rclone_conf: permission denied</code></p>
<p>was because I did not change the UID in the image for rclone Docker</p>
<p>Final step: <code>docker-compose build</code></p>
<ul>
<li>
<p>stress test: stress -c 4 -t 900s</p>
</li>
<li>
<p>https://healthchecks.io/</p>
</li>
<li>
<p>To update firmware: pacman -S rpi-eeprom:</p>
<ul>
<li>rpi-eeprom-update (checks version)</li>
<li>rpi-eeprom-update -a (updates)</li>
</ul>
</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="67-plasma">67. Plasma</h1>
<h2 id="671-packages">67.1. Packages</h2>
<pre class="hljs"><code><div>plasma-desktop
plasma-wayland-session
plasma-workspace-wallpapers
plasma-systemmonitor
plasma-nm
plasma-pa
plasma-browser-integration
powerdevil
bluedevil
kdialog  # for native dialogs in some apps
breeze breeze-gtk
kwrited
phonon-qt5-gstreamer
kde-gtk-config
xdg-desktop-portal xdg-desktop-portal-kde xdg-desktop-portal-gtk
khotkeys
</div></code></pre>
<h2 id="672-launch">67.2. Launch</h2>
<pre class="hljs"><code><div><span class="hljs-comment"># Wayland</span>
<span class="hljs-built_in">export</span> MOZ_ENABLE_WAYLAND=1
<span class="hljs-built_in">export</span> XDG_SESSION_TYPE=wayland
<span class="hljs-built_in">exec</span> startplasma-wayland

<span class="hljs-comment"># X11 </span>
<span class="hljs-built_in">exec</span> sx startplasma-x11
</div></code></pre>
<h2 id="673-autostart">67.3. Autostart</h2>
<p>Check the following paths</p>
<pre class="hljs"><code><div>~/.kde/Autostart
~/.kde/share/autostart
~/.config/autostart
~/.local/share/autostart
/etc/xdg/autostart
/usr/share/autostart
</div></code></pre>
<h2 id="674-xdg-autostart-directories">67.4. XDG Autostart directories</h2>
<p>Place Desktop entries (i.e. .desktop files) in the appropriate <strong>XDG Autostart directory</strong>:</p>
<ul>
<li>user-specific: <code>$XDG_CONFIG_HOME/autostart</code> (~/.config/autostart by default)</li>
<li>system-wide: <code>$XDG_CONFIG_DIRS/autostart</code> (/etc/xdg/autostart by default)</li>
</ul>
<p>To disable a system-wide entry, create an overriding entry containing <code>Hidden=true</code>.</p>
<h2 id="675-autostart-manager">67.5. Autostart Manager</h2>
<p>The program scans <code>$HOME/.config/autostart/</code> for applications and login scripts, <code>$HOME/.config/plasma-workspace/env</code> for pre-startup scripts and <code>$HOME/.config/plasma-workspace/shutdown</code> for logout scripts to check what programs and scripts are already there and displays them. However, applications in <code>/etc/xdg/autostart</code> are also launched.</p>
<p>To autostart an application, navigate to System Settings &gt; Startup and Shutdown &gt; Autostart and add the program or shell script of your choice. For applications, a .desktop file will be created, for login scripts, a .desktop file launching the script will be created.</p>
<p>If a desktop file under <code>$HOME/.config/autostart/</code> has <code>OnlyShowIn=XFCE;</code>, then it will not be autostarted.</p>
<h2 id="676-disable-kdeconnect">67.6. Disable kdeconnect</h2>
<p>First we need to avoid kdedconnect to autostart:</p>
<p><code>cp /etc/xdg/autostart/org.kde.kdeconnect.daemon.desktop ~/.config/autostart/</code></p>
<p>Now edit the file <code>~/.config/autostart/org.kde.kdeconnect.daemon.desktop</code> and add <code>Hidden=true</code>. Actually you can even remove everything else, because only the file name has to be identically so it's &quot;overriden&quot;. So it looks like:</p>
<pre class="hljs"><code><div>[Desktop Entry]
Hidden=true
</div></code></pre>
<p>Now the autostart service is disabled, but this isn't enough. We also need to &quot;disable&quot; the d-bus service:</p>
<pre class="hljs"><code><div>mkdir -p ~/.<span class="hljs-built_in">local</span>/share/dbus-1/services/
cp /usr/share/dbus-1/services/org.kde.kdeconnect.service ~/.<span class="hljs-built_in">local</span>/share/dbus-1/services/
</div></code></pre>
<p>Edit the file <code>~/.local/share/dbus-1/services/org.kde.kdeconnect.service</code>  and change Exec to <code>/usr/bin/false</code> so the file looks like:</p>
<pre class="hljs"><code><div>[D-BUS Service]
Name=org.kde.kdeconnect
Exec=/usr/bin/false
</div></code></pre>
<p><code>/usr/bin/false</code> will return with a &quot;error&quot; return code (because it returns with 1 and not 0), so your logs (via journalctl) may display the process couldn't start or failed. But that shouldn't matter.</p>
<p>Now kdeconnectd should not run anymore after you logout and login again.</p>
<h2 id="677-shortcuts">67.7. Shortcuts</h2>
<ul>
<li>&quot;Switch to Next Screen&quot; shortcut to work: you need to check &quot;Separate screen focus&quot; option first from System settings → Window behavior → Window Behavior (on the left side) → Separate screen focus</li>
<li>Logout Menu: Shortcuts → Session Management → Logout (default: ctrl+alt_del)</li>
<li>Screen Lock: Workspace Behavior → Sreen Locking (also, disable automatic screen lock here)</li>
<li>&quot;Switch to Next Screen&quot;: Meta+Ctrl+Right</li>
<li>&quot;Switch to Previous Screen&quot;: Meta+Ctrl+Left</li>
<li>&quot;Switch to Window to the Left&quot;: Meta+Alt+Left</li>
<li>&quot;Switch to Window to the Right&quot;: Meta+Alt+Right</li>
</ul>
<h2 id="678-config">67.8. Config</h2>
<h3 id="6781-startup-and-shutdown-%E2%86%92-background-services">67.8.1. Startup and Shutdown → Background Services</h3>
<ul>
<li>Remove Search Folder Updater (also go to Search → File Search and untick <code>Enable File Search</code>)</li>
</ul>
<h3 id="6782-startup-and-shutdown-%E2%86%92-desktop-session">67.8.2. Startup and Shutdown → Desktop Session</h3>
<ul>
<li><input type="checkbox" id="checkbox0" checked="true"><label for="checkbox0">Start with an empty session</label></li>
<li><input type="checkbox" id="checkbox1" checked="true"><label for="checkbox1">Confirm Logout</label></li>
<li><input type="checkbox" id="checkbox2" checked="true"><label for="checkbox2">Offer Shutdown Options</label></li>
<li><input type="checkbox" id="checkbox3" checked="true"><label for="checkbox3">End Current Session</label></li>
</ul>
<h3 id="6783-power-management-%E2%86%92-energy-saving">67.8.3. Power Management → Energy Saving</h3>
<ul>
<li>Untick Screen Energy Saving</li>
</ul>
<h3 id="6784-display-and-monitor-%E2%86%92-night-color">67.8.4. Display and Monitor → Night Color</h3>
<ul>
<li>Activate</li>
</ul>
<h3 id="6785-window-management-%E2%86%92-task-switcher">67.8.5. Window Management → Task Switcher</h3>
<ul>
<li>Filter Windows by: Virtual desktops and Screens (<strong>current</strong> in both)</li>
</ul>
<div style="page-break-after: always; break-after: page;"></div>
<h1 id="68-misc">68. Misc</h1>
<ol>
<li>
<p>By disabling all F86 binds in config and installing xfce-power-management (which needs to be started in config and need to get config from Manjaro/Home/.config) and installed pa-applet-git, pavucontrol and pulseaudio (initiated in config) all the F86 binds work.</p>
</li>
<li>
<p>It is preferable to have xfce4-notify (initiated in config by running <code>/usr/lib/xfce4/notifyd/xfce4-notifyd</code>) than dunst... Better notifications. Check i3 config and uninstall dunst (in endeavour).
In manjaro, do: <code>sudo mv /usr/share/dbus-1/services/org.knopwob.dunst.service{,.disabled}</code></p>
</li>
<li>
<p>Bluetooth:</p>
<ul>
<li>pacman -S pulseaudio-bluetooth</li>
<li>pulseaudio -k</li>
<li>yay -S bluez-hciconfig</li>
<li>hciconfig -&gt; lists bluetooth interfaces</li>
<li>sudo hciconfig hci1 down -&gt; turn off specific interface</li>
</ul>
</li>
<li>
<p>Sticky xrandr:</p>
<ul>
<li><code>xrandr --output eDP --primary</code></li>
<li><code>pacman -S autorandr</code></li>
<li><code>autorandr --save laptop</code></li>
</ul>
</li>
<li>
<p>FSTAB</p>
<pre class="hljs"><code><div>sshfs : jose@pi:/ /mnt/rebelo-pi fuse.sshfs noauto,x-systemd.automount,_netdev,user,idmap=user,follow_symlinks,identityfile=/root/.ssh/id_rsa,allow_other,default_permissions,uid=1995,gid=1995,noatime,reconnect,ServerAliveInterval=45,ServerAliveCountMax=2 0 0
</div></code></pre>
</li>
<li>
<p>SYMBOLIC LINKS</p>
<ul>
<li><code>ln -s /complete/path/to/original/file /complete/path/to/target/file</code> (the target file will be a &quot;pointer&quot; to the original file, but it's like the file is in the new target location)</li>
<li><code>ln -sr /relative/path/to/original/directory /complete/path/to/target/directory</code> (the target directory will be a link to the first; the -r flag means relative)</li>
<li>The <code>-f</code> flag will force the link, meaning it delets the target file/directory if it exists</li>
<li>Remember to always use complete paths and not relative paths if the -r flag is not specified</li>
</ul>
</li>
<li>
<p>SSH</p>
<ul>
<li>I can run commands over ssh like this: <code>ssh user@host 'command'</code>
<ul>
<li>Example: <code>liplisboacluster 'echo $(hostname)'</code> -&gt; prints hostname</li>
</ul>
</li>
<li>Writting on a remote file:</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-built_in">echo</span> <span class="hljs-string">'Some Text'</span> | ssh user@remotehost -T <span class="hljs-string">"cat &gt; /remotefile.txt"</span>
<span class="hljs-comment"># (-T flag fowards stdin local through ssh)</span>
cat ~/.ssh/id_rsa.pub | ssh user@remote.host <span class="hljs-string">'dd of=.ssh/authorized_keys oflag=append conv=notrunc'</span>
</div></code></pre>
<ul>
<li>In order to have several ssh keys, do:</li>
</ul>
<pre class="hljs"><code><div>ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">"your_email@example.com"</span>
<span class="hljs-built_in">eval</span> $(ssh-agent)
ssh-add ~/.ssh/id_rsa2 (newly created key)
</div></code></pre>
<ul>
<li>In order to have ssh-agent always running, check ~/.config/systemd and .zshrc</li>
<li><code>systemctl --user enable ssh-agent.service</code> (probably don't need to do this since I have a backup of .config/systemd)</li>
<li>Check services: <code>systemctl --user list-unit-files | grep enabled</code></li>
<li>Check services (all): <code>systemctl list-unit-files | grep enabled</code></li>
<li>Also, need to add to zshrc a function to load keys, since ssh-add only works for the current session</li>
<li>To have a proxy:</li>
</ul>
<pre class="hljs"><code><div>Host 10.0.10.3
User goncalo
ProxyCommand ssh goncalo@jgroboredo.ddns.net -W %h:%p
</div></code></pre>
<ul>
<li>If ssh service fails to start with error: Start request repeated too quickly, do the following:</li>
</ul>
<pre class="hljs"><code><div>sudo systemctl stop sshd.socket and sshd.service
sudo /usr/bin/sshd -d
<span class="hljs-comment">#If message from above command states a permission issue:</span>
sudo chmod 400 /etc/ssh/ssh*key
</div></code></pre>
</li>
<li>
<p>Firefox crash</p>
<ul>
<li>
<p>Seems like it was the gtk theme from popOS that made firefox to crash</p>
</li>
<li>
<p>In sway, if font problems, export GTK_USE_PORTAL=1</p>
</li>
<li>
<p>In what concerns crashes, picom with xrender crashes! Need to use glx</p>
</li>
<li>
<p>Today, 10/08/2021, firefox started crashing. Disabled picom and it did not solve the problem. Updated picom config from arch linux wiki, did not help. Firefox-&gt;Settings-&gt;Performance did not change anything</p>
</li>
<li>
<p>Starting firefox from terminal does not seem to solve the problem. Does not output any errors.</p>
</li>
<li>
<p>Testing launching firefox and terminal from i3 bind with the flag --no-startup-id -&gt; doesnt work</p>
</li>
<li>
<p>Testing google-chrome-stable; disabled guake</p>
</li>
<li>
<p>Google-chrome also crashed; However, it recovered after a few seconds, similar to what previously happened to vscode. It seems like a X11 problem. Moved to sway.</p>
</li>
<li>
<p>Testing again firefox crashes on i3. For now, uninstalled xf86-video-intel. Since then, no crashes yet.</p>
</li>
<li>
<p>FIREFOX SLOW START:</p>
<ul>
<li>about:config</li>
<li>set 0 to all widget.use-xdg-desktop-portal</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ARCH NOT BOOTING IN VM</p>
<ul>
<li>On a recent installation of arch on a VM, it did not boot after installing the custom grub-theme. In order to solve this, either chroot or open a terminal using ctrl+alt+F2. There, delete the grub theme in /usr/share/grub/themes and after that run grub-mkconfig -o /boot/grub/grub.cfg</li>
<li>The above solution doesn't work. In fact I am very dumb. This was only related with the fact that I have a intel config file in /etc/X11/xorg.d.... DUMBBBB</li>
</ul>
</li>
<li>
<p>FIND UUID OF DISK</p>
<ul>
<li>sudo blkid | grep UUID=</li>
</ul>
</li>
<li>
<p>FIX YAY</p>
<ul>
<li>Error: yay: error while loading shared libraries: libalpm.so.11:  cannot open shared object file: No such file or directory</li>
<li>Fix: rebuild yay:</li>
</ul>
<pre class="hljs"><code><div>cd /tmp &amp;&amp; git clone 'https://aur.archlinux.org/yay.git' 
    &amp;&amp; cd /tmp/yay &amp;&amp; makepkg -si &amp;&amp; cd ~ &amp;&amp; rm -rf /tmp/yay/
</div></code></pre>
</li>
<li>
<p>FIX PAMAC</p>
<ul>
<li><code>Error: libpamac-aur: /etc/pamac.conf exists in filesystem</code>(owned by pamac-aur)</li>
<li>Fix: <code>pacman -R pamac-aur &amp;&amp; yay -S pamac-aur</code></li>
</ul>
</li>
<li>
<p>FIX TIME</p>
<ul>
<li><code>sudo ntpd -qg</code></li>
<li>install ntp</li>
<li><code>sudo ntpdate pool.ntp.org</code></li>
<li><code>timedatectl set-ntp true</code></li>
</ul>
</li>
<li>
<p>CHECK RAM
<code>sudo dmidecode -t memory</code></p>
</li>
<li>
<p>lxrandr to change monitors</p>
</li>
<li>
<p>CONFIG LINUX ACCOUNT</p>
<pre class="hljs"><code><div>sudo useradd -m <span class="hljs-built_in">test</span>
userdel &lt;nome de utilizador <span class="hljs-keyword">do</span> utilizador&gt;
adduser username sudo
/etc/ssh/sshd_config <span class="hljs-comment"># Allow pubkey and add authorized_keys file;</span>
chsh -s $(<span class="hljs-built_in">which</span> zsh)
sudo service ssh restart
<span class="hljs-comment"># For redmine: couldn't add repos to redmine: change permissions: </span>
chmod 775 /path/to/dir
</div></code></pre>
</li>
<li>
<p>Dmenu-extended</p>
<ul>
<li>For apps to open I need desktop files to associate a given mimetype to a binary</li>
<li>After doing the above step, rebuild cache</li>
</ul>
</li>
<li>
<p>NetworkManager/Network interface stopped working</p>
<ul>
<li>Solution: boot to a pen with manjaro and reboot</li>
<li>See logs:</li>
</ul>
<pre class="hljs"><code><div>find /sys/class/net -follow -maxdepth 2 -name wireless
cat /proc/net/wireless
iw dev
sudo iw dev wlp0s20f3 connect <span class="hljs-string">"ROBOREDO"</span>
sudo dmesg | grep firmware
sudo dmesg --level=emerg,alert,crit,err
lspci | grep net
lsmod
sudo ls /etc/netctl/interfaces
</div></code></pre>
</li>
<li>
<p>Rebuild all yay packages depending on python:
<code>yay -S $(pacman -Qoq /usr/lib/python3.9) --answerclean All</code></p>
</li>
<li>
<p>nc : install <code>pacman -S gnu-netcat</code></p>
</li>
<li>
<p>Can add stuff to path in .xinitrc; a user systemd service needs to have WantedBy=default.target and not multi-user
The rclone command will not work in a user service since systemd doesn't have access to env variables. For that, just add a env.conf file to .config/environment.d/ (check printenv)</p>
</li>
<li>
<p>Delay a systemd service:</p>
<pre class="hljs"><code><div>[Service]
ExecStartPre=/bin/sleep 30 
</div></code></pre>
</li>
<li>
<p>DMZ - portas abertas para toda a internet</p>
</li>
<li>
<p><code>dhcpcd -T eth0</code> - check dns</p>
</li>
<li>
<p>PERMISSIONS</p>
<pre class="hljs"><code><div>chown -R root:root /etc
find /etc -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">exec</span> chmod 644 {} +
find /etc -<span class="hljs-built_in">type</span> d -<span class="hljs-built_in">exec</span> chmod 755 {} +
chmod 755 /etc/init.d/* /etc/rc.local /etc/network/* /etc/cron.*/*
chmod 400 /etc/ssh/ssh*key
check desktop_dotfiles
</div></code></pre>
</li>
<li>
<p>Need imagemagick for blurlock</p>
</li>
<li>
<p>samba</p>
<pre class="hljs"><code><div>smbclient <span class="hljs-string">'//print-server.critical.pt/Drivers/'</span> -U critical/jgroboredo (smbclient <span class="hljs-string">'//ip/Directory'</span>)
smbclient <span class="hljs-string">'\\files.critical.pt/Repository'</span> -U critical/jgroboredo
get file
</div></code></pre>
</li>
<li>
<p>bluedevil; bluedevil-wizard; systemctl start bluetooth;
pavucontrol: High Fidelity Playback (A2DP Sink, codec LDAC)
blueberry-tray</p>
</li>
<li>
<p><code>sudo lsof -i -P -n | grep LISTEN</code></p>
</li>
<li>
<p>bash gum package</p>
</li>
<li>
<p>gtk-update-icon-cache -f -t .icons ou (/usr/share/icons/)
Add icon field in desktop file - only the name.png</p>
</li>
</ol>

</body>
</html>
